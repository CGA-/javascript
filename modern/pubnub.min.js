// 3.4.2
(function(){
var j=!0,k=null,m=!1;function q(){return function(){}}function x(a){return function(){return a}}var C=1,D=m,F=[],G="-pnpres",H=10,J=310,N=60,O=1E3,aa=/{([\w\-]+)}/g;function ba(){return"x"+ ++C+""+ +new Date}function P(){return+new Date}var Q,ca=Math.floor(20*Math.random());Q=function(a,b){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(b?R().split("-")[0]:20>++ca?ca:ca=1))||a};function da(a,b){function c(){f+b>P()?(clearTimeout(d),d=setTimeout(c,b)):(f=P(),a())}var d,f=0;return c}
function ea(a,b){var c=[];W(a||[],function(a){b(a)&&c.push(a)});return c}function fa(a,b){return a.replace(aa,function(a,d){return b[d]||a})}function X(a,b){return setTimeout(a,b)}function R(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b}
function W(a,b){if(a&&b)if("undefined"!=typeof a[0])for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function Y(a,b){var c=[];W(a||[],function(a,f){c.push(b(a,f))});return c}function Z(a){return Y(encodeURIComponent(a).split(""),function(a){return 0>"-_.!~*'()".indexOf(a)?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function $(a){var b=[];W(a,function(a,d){d.f&&b.push(a)});return b.sort()}
function ga(){X(function(){D||(D=1,W(F,function(a){a()}))},O)}
function ka(a){function b(){}function c(a){a&&(s.g=0);!s.g&&s.length&&(s.g=1,t(s.shift()))}function d(a){W($(l),function(b){(b=l[b])&&a(b)})}var f=+a.windowing||H,n=(+a.timeout||J)*O,u=(+a.keepalive||N)*O,r=a.publish_key||"",g=a.subscribe_key||"",w=a.ssl?"s":"",y="http"+w+"://"+(a.origin||"pubsub.pubnub.com"),z=Q(y),S=Q(y),s=[],T=0,U=0,K=0,L=0,V=0,E=0,l={},t=a.xdr,M=a._is_online||x(1),v=a.jsonp_cb||x(0),A=a.db||{get:q(),set:q()},B=a.uuid||A&&A.get(g+"uuid")||"",e={_reset_offline:function(){K&&K(1)},
LEAVE:function(a,b){var d={uuid:B},c=Q(y),p=v();0<a.indexOf(G)||("0"!=p&&(d.callback=p),t({l:b||w,timeout:2E3,a:p,data:d,url:[c,"v2","presence","sub_key",g,"channel",Z(a),"leave"]}))},history:function(a,b){var b=a.callback||b,d=a.count||a.limit||100,c=a.reverse||"false",p=a.error||q(),e=a.channel,n=a.start,f=a.end,h={},i=v();if(!e)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");h.stringtoken="true";h.count=d;h.reverse=c;i&&(h.callback=
i);n&&(h.start=n);f&&(h.end=f);t({a:i,data:h,c:function(a){b(a)},b:p,url:[z,"v2","history","sub-key",g,"channel",Z(e)]})},replay:function(a){var b=b||a.callback||q(),d=a.source,c=a.destination,p=a.stop,e=a.start,n=a.end,f=a.reverse,a=a.limit,h=v(),i={};if(!d)return error("Missing Source Channel");if(!c)return error("Missing Destination Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");"0"!=h&&(i.callback=h);p&&(i.stop="all");f&&(i.reverse="true");e&&(i.start=
e);n&&(i.end=n);a&&(i.count=a);t({a:h,c:function(a){b(a)},b:function(){b([0,"Disconnected"])},url:[z,"v1","replay",r,g,d,c],data:i})},time:function(a){var b=v();t({a:b,timeout:5*O,url:[z,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,b){var b=b||a.callback||q(),d=a.message,I=a.channel,p=v();if(!d)return error("Missing Message");if(!I)return error("Missing Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");d=JSON.stringify(d);
I=[z,"publish",r,g,0,Z(I),p,Z(d)];s.push({a:p,timeout:5*O,url:I,data:{uuid:B},c:function(a){b(a);c(1)},b:function(){b([0,"Failed",d]);c(1)}});c()},unsubscribe:function(a){a=a.channel;E=0;L=1;a=Y((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+G}).join(",");W(a.split(","),function(a){D&&e.LEAVE(a,0);l[a]=0});D&&b()},subscribe:function(a,c){function ha(a){a?X(I,O):(z=Q(y,1),S=Q(y,1),X(function(){e.time(ha)},O));d(function(b){if(a&&b.d)return b.d=0,b.j(b.name);!a&&!b.d&&(b.d=1,b.i(b.name))})}
function I(){var a=v(),b=$(l).join(",");b&&(K=t({timeout:r,a:a,b:function(){e.time(ha)},data:{uuid:B},url:[S,"subscribe",g,Z(b),a,E],c:function(a){if(!a)return X(I,u);d(function(a){a.e||(a.e=1,a.h(a.name))});(E=!E&&L&&A.get(g)||a[1])&&A.set(g,a[1]);var b,ia=(2<a.length?a[2]:"").split(",");b=function(){var a=ia.shift()||"";return[(l[a]||{}).a||T,(a||U).split(G)[0]]};W(a[0],function(ia){var d=b();if(l[d[1]].f)d[0](ia,a,d[1])});X(I,u)}}))}var p=a.channel,c=(c=c||a.callback)||a.message,va=a.connect||
q(),Ua=a.reconnect||q(),s=a.disconnect||q(),h=a.presence||0,i=a.noheresync||0,r=a.timeout||n,u=a.windowing||f;a.restore&&(L=1);E=0;if(!p)return error("Missing Channel");if(!c)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");W((p.join?p.join(","):""+p).split(","),function(a){var b=l[a]||{};l[U=a]={name:a,e:b.e,d:b.d,f:1,a:T=c,h:va,i:s,j:Ua};h&&(e.subscribe({channel:a+G,callback:h}),!b.f&&!i&&e.here_now({channel:a,callback:function(b){W("uuids"in b?b.uuids:[],function(ia){h({action:"join",
uuid:ia,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});b=function(){e._reset_offline();clearTimeout(V);V=X(I,100)};if(!D)return F.push(b);b()},here_now:function(a,b){var b=a.callback||b,d=a.error||q(),c=a.channel,p=v(),e=k;if(!c)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");"0"!=p&&(e={},e.callback=p);t({a:p,data:e,c:function(a){b(a)},b:d,url:[z,"v2","presence","sub_key",g,"channel",Z(c)]})},xdr:t,ready:ga,db:A,uuid:R,each:W,
map:Y,grep:ea,supplant:fa,now:P,unique:ba,updater:da,poll_online:function(){M()||e._reset_offline();X(e.poll_online,O)},poll_online2:function(){e.time(function(a){a||e._reset_offline();X(e.poll_online2,u)})}};B||(B=e.uuid());A.set(g+"uuid",B);X(e.poll_online,O);X(e.poll_online2,u);return e}
function la(a){function b(a){f||(f=1,clearTimeout(u),d&&(d.onerror=d.onload=k,d.abort&&d.abort(),d=k),a&&r())}function c(){if(!n){n=1;clearTimeout(u);try{response=JSON.parse(d.responseText)}catch(a){return b(1)}g(response)}}var d,f=0,n=0,u=X(function(){b(1)},ma),r=a.b||q(),g=a.c||q();try{d="undefined"!==typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(){b(1)};d.onload=d.onloadend=c;d.timeout=ma;url=a.url.join(na);if(a.data){var w=[];url+="?";for(key in a.data)w.push(key+
"="+a.data[key]);url+=w.join(oa)}d.open("GET",url,j);d.send()}catch(y){return b(0),la(a)}return b}function pa(a,b,c){W(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=j,a.returnValue=m,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,m):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}
function qa(a){a.db=ra;a.xdr=la;var b=ka(a);b.init=qa;if(a.notest)return b;pa("beforeunload",window,function(){each_channel(function(a){b.LEAVE(a.name,1)});return j});pa("offline",window,b._reset_offline);pa("offline",document,b._reset_offline);b.ready();return b}var na="/",oa="&",ma=31E4,ra,sa="undefined"!=typeof localStorage&&localStorage;
ra={get:function(a){try{return sa?sa.getItem(a):-1==document.cookie.indexOf(a)?k:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||k}catch(b){}},set:function(a,b){try{if(sa)return sa.setItem(a,b)&&0;document.cookie=a+"="+b+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(c){}}};"undefined"!==typeof module&&(module.m=qa)||"undefined"!==typeof exports&&(exports.k=qa)||(PUBNUB=qa);C=1;D=m;F=[];G="-pnpres";H=10;J=310;N=60;O=1E3;aa=/{([\w\-]+)}/g;
function ba(){return"x"+ ++C+""+ +new Date}function P(){return+new Date}var ta=Math.floor(20*Math.random());Q=function(a,b){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(b?R().split("-")[0]:20>++ta?ta:ta=1))||a};function da(a,b){function c(){f+b>P()?(clearTimeout(d),d=setTimeout(c,b)):(f=P(),a())}var d,f=0;return c}function ea(a,b){var c=[];W(a||[],function(a){b(a)&&c.push(a)});return c}function fa(a,b){return a.replace(aa,function(a,d){return b[d]||a})}
function X(a,b){return setTimeout(a,b)}function R(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b}function W(a,b){if(a&&b)if("undefined"!=typeof a[0])for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function Y(a,b){var c=[];W(a||[],function(a,f){c.push(b(a,f))});return c}
function Z(a){return Y(encodeURIComponent(a).split(""),function(a){return 0>"-_.!~*'()".indexOf(a)?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function $(a){var b=[];W(a,function(a,d){d.f&&b.push(a)});return b.sort()}function ga(){X(function(){D||(D=1,W(F,function(a){a()}))},O)}
function ka(a){function b(){}function c(a){a&&(s.g=0);!s.g&&s.length&&(s.g=1,t(s.shift()))}function d(a){W($(l),function(b){(b=l[b])&&a(b)})}var f=+a.windowing||H,n=(+a.timeout||J)*O,u=(+a.keepalive||N)*O,r=a.publish_key||"",g=a.subscribe_key||"",w=a.ssl?"s":"",y="http"+w+"://"+(a.origin||"pubsub.pubnub.com"),z=Q(y),S=Q(y),s=[],T=0,U=0,K=0,L=0,V=0,E=0,l={},t=a.xdr,M=a._is_online||x(1),v=a.jsonp_cb||x(0),A=a.db||{get:q(),set:q()},B=a.uuid||A&&A.get(g+"uuid")||"",e={_reset_offline:function(){K&&K(1)},
LEAVE:function(a,b){var d={uuid:B},c=Q(y),p=v();0<a.indexOf(G)||("0"!=p&&(d.callback=p),t({l:b||w,timeout:2E3,a:p,data:d,url:[c,"v2","presence","sub_key",g,"channel",Z(a),"leave"]}))},history:function(a,b){var b=a.callback||b,d=a.count||a.limit||100,c=a.reverse||"false",p=a.error||q(),e=a.channel,f=a.start,n=a.end,h={},i=v();if(!e)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");h.stringtoken="true";h.count=d;h.reverse=c;i&&(h.callback=
i);f&&(h.start=f);n&&(h.end=n);t({a:i,data:h,c:function(a){b(a)},b:p,url:[z,"v2","history","sub-key",g,"channel",Z(e)]})},replay:function(a){var b=b||a.callback||q(),d=a.source,c=a.destination,p=a.stop,e=a.start,f=a.end,n=a.reverse,a=a.limit,h=v(),i={};if(!d)return error("Missing Source Channel");if(!c)return error("Missing Destination Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");"0"!=h&&(i.callback=h);p&&(i.stop="all");n&&(i.reverse="true");e&&(i.start=
e);f&&(i.end=f);a&&(i.count=a);t({a:h,c:function(a){b(a)},b:function(){b([0,"Disconnected"])},url:[z,"v1","replay",r,g,d,c],data:i})},time:function(a){var b=v();t({a:b,timeout:5*O,url:[z,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,b){var b=b||a.callback||q(),d=a.message,e=a.channel,p=v();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[z,"publish",r,g,0,Z(e),p,Z(d)];s.push({a:p,timeout:5*O,url:e,data:{uuid:B},c:function(a){b(a);c(1)},b:function(){b([0,"Failed",d]);c(1)}});c()},unsubscribe:function(a){a=a.channel;E=0;L=1;a=Y((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+G}).join(",");W(a.split(","),function(a){D&&e.LEAVE(a,0);l[a]=0});D&&b()},subscribe:function(a,c){function ha(a){a?X(I,O):(z=Q(y,1),S=Q(y,1),X(function(){e.time(ha)},O));d(function(b){if(a&&b.d)return b.d=0,b.j(b.name);!a&&!b.d&&(b.d=1,b.i(b.name))})}
function I(){var a=v(),b=$(l).join(",");b&&(K=t({timeout:u,a:a,b:function(){e.time(ha)},data:{uuid:B},url:[S,"subscribe",g,Z(b),a,E],c:function(a){if(!a)return X(I,w);d(function(a){a.e||(a.e=1,a.h(a.name))});(E=!E&&L&&A.get(g)||a[1])&&A.set(g,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(l[a]||{}).a||T,(a||U).split(G)[0]]};W(a[0],function(d){var c=b();if(l[c[1]].f)c[0](d,a,c[1])});X(I,w)}}))}var p=a.channel,c=(c=c||a.callback)||a.message,va=a.connect||q(),
s=a.reconnect||q(),r=a.disconnect||q(),h=a.presence||0,i=a.noheresync||0,u=a.timeout||n,w=a.windowing||f;a.restore&&(L=1);E=0;if(!p)return error("Missing Channel");if(!c)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");W((p.join?p.join(","):""+p).split(","),function(a){var b=l[a]||{};l[U=a]={name:a,e:b.e,d:b.d,f:1,a:T=c,h:va,i:r,j:s};h&&(e.subscribe({channel:a+G,callback:h}),!b.f&&!i&&e.here_now({channel:a,callback:function(b){W("uuids"in b?b.uuids:[],function(d){h({action:"join",
uuid:d,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});b=function(){e._reset_offline();clearTimeout(V);V=X(I,100)};if(!D)return F.push(b);b()},here_now:function(a,b){var b=a.callback||b,d=a.error||q(),c=a.channel,e=v(),f=k;if(!c)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);t({a:e,data:f,c:function(a){b(a)},b:d,url:[z,"v2","presence","sub_key",g,"channel",Z(c)]})},xdr:t,ready:ga,db:A,uuid:R,each:W,
map:Y,grep:ea,supplant:fa,now:P,unique:ba,updater:da,poll_online:function(){M()||e._reset_offline();X(e.poll_online,O)},poll_online2:function(){e.time(function(a){a||e._reset_offline();X(e.poll_online2,u)})}};B||(B=e.uuid());A.set(g+"uuid",B);X(e.poll_online,O);X(e.poll_online2,u);return e}
function ua(a){function b(a){f||(f=1,clearTimeout(u),d&&(d.onerror=d.onload=k,d.abort&&d.abort(),d=k),a&&r())}function c(){if(!n){n=1;clearTimeout(u);try{response=JSON.parse(d.responseText)}catch(a){return b(1)}g(response)}}var d,f=0,n=0,u=X(function(){b(1)},wa),r=a.b||q(),g=a.c||q();try{d="undefined"!==typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(){b(1)};d.onload=d.onloadend=c;d.timeout=wa;url=a.url.join(xa);if(a.data){var w=[];url+="?";for(key in a.data)w.push(key+
"="+a.data[key]);url+=w.join(ya)}d.open("GET",url,j);d.send()}catch(y){return b(0),ua(a)}return b}function za(a,b,c){W(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=j,a.returnValue=m,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,m):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}
function Aa(a){a.db=Ba;a.xdr=ua;var b=ka(a);b.init=Aa;if(a.notest)return b;za("beforeunload",window,function(){each_channel(function(a){b.LEAVE(a.name,1)});return j});za("offline",window,b._reset_offline);za("offline",document,b._reset_offline);b.ready();return b}var xa="/",ya="&",wa=31E4,Ba,Ca="undefined"!=typeof localStorage&&localStorage;
Ba={get:function(a){try{return Ca?Ca.getItem(a):-1==document.cookie.indexOf(a)?k:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||k}catch(b){}},set:function(a,b){try{if(Ca)return Ca.setItem(a,b)&&0;document.cookie=a+"="+b+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(c){}}};"undefined"!==typeof module&&(module.m=Aa)||"undefined"!==typeof exports&&(exports.k=Aa)||(PUBNUB=Aa);C=1;D=m;F=[];G="-pnpres";H=10;J=310;N=60;O=1E3;aa=/{([\w\-]+)}/g;
function ba(){return"x"+ ++C+""+ +new Date}function P(){return+new Date}var Da=Math.floor(20*Math.random());Q=function(a,b){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(b?R().split("-")[0]:20>++Da?Da:Da=1))||a};function da(a,b){function c(){f+b>P()?(clearTimeout(d),d=setTimeout(c,b)):(f=P(),a())}var d,f=0;return c}function ea(a,b){var c=[];W(a||[],function(a){b(a)&&c.push(a)});return c}function fa(a,b){return a.replace(aa,function(a,d){return b[d]||a})}
function X(a,b){return setTimeout(a,b)}function R(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b}function W(a,b){if(a&&b)if("undefined"!=typeof a[0])for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function Y(a,b){var c=[];W(a||[],function(a,f){c.push(b(a,f))});return c}
function Z(a){return Y(encodeURIComponent(a).split(""),function(a){return 0>"-_.!~*'()".indexOf(a)?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function $(a){var b=[];W(a,function(a,d){d.f&&b.push(a)});return b.sort()}function ga(){X(function(){D||(D=1,W(F,function(a){a()}))},O)}
function ka(a){function b(){}function c(a){a&&(s.g=0);!s.g&&s.length&&(s.g=1,t(s.shift()))}function d(a){W($(l),function(b){(b=l[b])&&a(b)})}var f=+a.windowing||H,n=(+a.timeout||J)*O,u=(+a.keepalive||N)*O,r=a.publish_key||"",g=a.subscribe_key||"",w=a.ssl?"s":"",y="http"+w+"://"+(a.origin||"pubsub.pubnub.com"),z=Q(y),S=Q(y),s=[],T=0,U=0,K=0,L=0,V=0,E=0,l={},t=a.xdr,M=a._is_online||x(1),v=a.jsonp_cb||x(0),A=a.db||{get:q(),set:q()},B=a.uuid||A&&A.get(g+"uuid")||"",e={_reset_offline:function(){K&&K(1)},
LEAVE:function(a,b){var d={uuid:B},c=Q(y),e=v();0<a.indexOf(G)||("0"!=e&&(d.callback=e),t({l:b||w,timeout:2E3,a:e,data:d,url:[c,"v2","presence","sub_key",g,"channel",Z(a),"leave"]}))},history:function(a,b){var b=a.callback||b,d=a.count||a.limit||100,c=a.reverse||"false",e=a.error||q(),f=a.channel,n=a.start,l=a.end,h={},i=v();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");h.stringtoken="true";h.count=d;h.reverse=c;i&&(h.callback=
i);n&&(h.start=n);l&&(h.end=l);t({a:i,data:h,c:function(a){b(a)},b:e,url:[z,"v2","history","sub-key",g,"channel",Z(f)]})},replay:function(a){var b=b||a.callback||q(),d=a.source,c=a.destination,e=a.stop,f=a.start,n=a.end,l=a.reverse,a=a.limit,h=v(),i={};if(!d)return error("Missing Source Channel");if(!c)return error("Missing Destination Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");"0"!=h&&(i.callback=h);e&&(i.stop="all");l&&(i.reverse="true");f&&(i.start=
f);n&&(i.end=n);a&&(i.count=a);t({a:h,c:function(a){b(a)},b:function(){b([0,"Disconnected"])},url:[z,"v1","replay",r,g,d,c],data:i})},time:function(a){var b=v();t({a:b,timeout:5*O,url:[z,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,b){var b=b||a.callback||q(),d=a.message,e=a.channel,f=v();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[z,"publish",r,g,0,Z(e),f,Z(d)];s.push({a:f,timeout:5*O,url:e,data:{uuid:B},c:function(a){b(a);c(1)},b:function(){b([0,"Failed",d]);c(1)}});c()},unsubscribe:function(a){a=a.channel;E=0;L=1;a=Y((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+G}).join(",");W(a.split(","),function(a){D&&e.LEAVE(a,0);l[a]=0});D&&b()},subscribe:function(a,c){function ha(a){a?X(I,O):(z=Q(y,1),S=Q(y,1),X(function(){e.time(ha)},O));d(function(b){if(a&&b.d)return b.d=0,b.j(b.name);!a&&!b.d&&(b.d=1,b.i(b.name))})}
function I(){var a=v(),b=$(l).join(",");b&&(K=t({timeout:w,a:a,b:function(){e.time(ha)},data:{uuid:B},url:[S,"subscribe",g,Z(b),a,E],c:function(a){if(!a)return X(I,M);d(function(a){a.e||(a.e=1,a.h(a.name))});(E=!E&&L&&A.get(g)||a[1])&&A.set(g,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(l[a]||{}).a||T,(a||U).split(G)[0]]};W(a[0],function(d){var c=b();if(l[c[1]].f)c[0](d,a,c[1])});X(I,M)}}))}var p=a.channel,c=(c=c||a.callback)||a.message,s=a.connect||q(),r=
a.reconnect||q(),u=a.disconnect||q(),h=a.presence||0,i=a.noheresync||0,w=a.timeout||n,M=a.windowing||f;a.restore&&(L=1);E=0;if(!p)return error("Missing Channel");if(!c)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");W((p.join?p.join(","):""+p).split(","),function(a){var b=l[a]||{};l[U=a]={name:a,e:b.e,d:b.d,f:1,a:T=c,h:s,i:u,j:r};h&&(e.subscribe({channel:a+G,callback:h}),!b.f&&!i&&e.here_now({channel:a,callback:function(b){W("uuids"in b?b.uuids:[],function(d){h({action:"join",
uuid:d,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});b=function(){e._reset_offline();clearTimeout(V);V=X(I,100)};if(!D)return F.push(b);b()},here_now:function(a,b){var b=a.callback||b,d=a.error||q(),c=a.channel,e=v(),f=k;if(!c)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);t({a:e,data:f,c:function(a){b(a)},b:d,url:[z,"v2","presence","sub_key",g,"channel",Z(c)]})},xdr:t,ready:ga,db:A,uuid:R,each:W,
map:Y,grep:ea,supplant:fa,now:P,unique:ba,updater:da,poll_online:function(){M()||e._reset_offline();X(e.poll_online,O)},poll_online2:function(){e.time(function(a){a||e._reset_offline();X(e.poll_online2,u)})}};B||(B=e.uuid());A.set(g+"uuid",B);X(e.poll_online,O);X(e.poll_online2,u);return e}
function Ea(a){function b(a){f||(f=1,clearTimeout(u),d&&(d.onerror=d.onload=k,d.abort&&d.abort(),d=k),a&&r())}function c(){if(!n){n=1;clearTimeout(u);try{response=JSON.parse(d.responseText)}catch(a){return b(1)}g(response)}}var d,f=0,n=0,u=X(function(){b(1)},Fa),r=a.b||q(),g=a.c||q();try{d="undefined"!==typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(){b(1)};d.onload=d.onloadend=c;d.timeout=Fa;url=a.url.join(Ga);if(a.data){var w=[];url+="?";for(key in a.data)w.push(key+
"="+a.data[key]);url+=w.join(Ha)}d.open("GET",url,j);d.send()}catch(y){return b(0),Ea(a)}return b}function Ia(a,b,c){W(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=j,a.returnValue=m,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,m):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}
function Ja(a){a.db=Ka;a.xdr=Ea;var b=ka(a);b.init=Ja;if(a.notest)return b;Ia("beforeunload",window,function(){each_channel(function(a){b.LEAVE(a.name,1)});return j});Ia("offline",window,b._reset_offline);Ia("offline",document,b._reset_offline);b.ready();return b}var Ga="/",Ha="&",Fa=31E4,Ka,La="undefined"!=typeof localStorage&&localStorage;
Ka={get:function(a){try{return La?La.getItem(a):-1==document.cookie.indexOf(a)?k:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||k}catch(b){}},set:function(a,b){try{if(La)return La.setItem(a,b)&&0;document.cookie=a+"="+b+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(c){}}};"undefined"!==typeof module&&(module.m=Ja)||"undefined"!==typeof exports&&(exports.k=Ja)||(PUBNUB=Ja);C=1;D=m;F=[];G="-pnpres";H=10;J=310;N=60;O=1E3;aa=/{([\w\-]+)}/g;
function ba(){return"x"+ ++C+""+ +new Date}function P(){return+new Date}var Ma=Math.floor(20*Math.random());Q=function(a,b){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(b?R().split("-")[0]:20>++Ma?Ma:Ma=1))||a};function da(a,b){function c(){f+b>P()?(clearTimeout(d),d=setTimeout(c,b)):(f=P(),a())}var d,f=0;return c}function ea(a,b){var c=[];W(a||[],function(a){b(a)&&c.push(a)});return c}function fa(a,b){return a.replace(aa,function(a,d){return b[d]||a})}
function X(a,b){return setTimeout(a,b)}function R(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b}function W(a,b){if(a&&b)if("undefined"!=typeof a[0])for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function Y(a,b){var c=[];W(a||[],function(a,f){c.push(b(a,f))});return c}
function Z(a){return Y(encodeURIComponent(a).split(""),function(a){return 0>"-_.!~*'()".indexOf(a)?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function $(a){var b=[];W(a,function(a,d){d.f&&b.push(a)});return b.sort()}function ga(){X(function(){D||(D=1,W(F,function(a){a()}))},O)}
function ka(a){function b(){}function c(a){a&&(s.g=0);!s.g&&s.length&&(s.g=1,t(s.shift()))}function d(a){W($(l),function(b){(b=l[b])&&a(b)})}var f=+a.windowing||H,n=(+a.timeout||J)*O,u=(+a.keepalive||N)*O,r=a.publish_key||"",g=a.subscribe_key||"",w=a.ssl?"s":"",y="http"+w+"://"+(a.origin||"pubsub.pubnub.com"),z=Q(y),S=Q(y),s=[],T=0,U=0,K=0,L=0,V=0,E=0,l={},t=a.xdr,M=a._is_online||x(1),v=a.jsonp_cb||x(0),A=a.db||{get:q(),set:q()},B=a.uuid||A&&A.get(g+"uuid")||"",e={_reset_offline:function(){K&&K(1)},
LEAVE:function(a,b){var d={uuid:B},c=Q(y),e=v();0<a.indexOf(G)||("0"!=e&&(d.callback=e),t({l:b||w,timeout:2E3,a:e,data:d,url:[c,"v2","presence","sub_key",g,"channel",Z(a),"leave"]}))},history:function(a,b){var b=a.callback||b,d=a.count||a.limit||100,c=a.reverse||"false",e=a.error||q(),f=a.channel,n=a.start,l=a.end,h={},i=v();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");h.stringtoken="true";h.count=d;h.reverse=c;i&&(h.callback=
i);n&&(h.start=n);l&&(h.end=l);t({a:i,data:h,c:function(a){b(a)},b:e,url:[z,"v2","history","sub-key",g,"channel",Z(f)]})},replay:function(a){var b=b||a.callback||q(),d=a.source,c=a.destination,e=a.stop,f=a.start,n=a.end,l=a.reverse,a=a.limit,h=v(),i={};if(!d)return error("Missing Source Channel");if(!c)return error("Missing Destination Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");"0"!=h&&(i.callback=h);e&&(i.stop="all");l&&(i.reverse="true");f&&(i.start=
f);n&&(i.end=n);a&&(i.count=a);t({a:h,c:function(a){b(a)},b:function(){b([0,"Disconnected"])},url:[z,"v1","replay",r,g,d,c],data:i})},time:function(a){var b=v();t({a:b,timeout:5*O,url:[z,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,b){var b=b||a.callback||q(),d=a.message,e=a.channel,f=v();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[z,"publish",r,g,0,Z(e),f,Z(d)];s.push({a:f,timeout:5*O,url:e,data:{uuid:B},c:function(a){b(a);c(1)},b:function(){b([0,"Failed",d]);c(1)}});c()},unsubscribe:function(a){a=a.channel;E=0;L=1;a=Y((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+G}).join(",");W(a.split(","),function(a){D&&e.LEAVE(a,0);l[a]=0});D&&b()},subscribe:function(a,c){function s(a){a?X(I,O):(z=Q(y,1),S=Q(y,1),X(function(){e.time(s)},O));d(function(b){if(a&&b.d)return b.d=0,b.j(b.name);!a&&!b.d&&(b.d=1,b.i(b.name))})}
function I(){var a=v(),b=$(l).join(",");b&&(K=t({timeout:M,a:a,b:function(){e.time(s)},data:{uuid:B},url:[S,"subscribe",g,Z(b),a,E],c:function(a){if(!a)return X(I,ja);d(function(a){a.e||(a.e=1,a.h(a.name))});(E=!E&&L&&A.get(g)||a[1])&&A.set(g,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(l[a]||{}).a||T,(a||U).split(G)[0]]};W(a[0],function(d){var c=b();if(l[c[1]].f)c[0](d,a,c[1])});X(I,ja)}}))}var p=a.channel,c=(c=c||a.callback)||a.message,r=a.connect||q(),
u=a.reconnect||q(),w=a.disconnect||q(),h=a.presence||0,i=a.noheresync||0,M=a.timeout||n,ja=a.windowing||f;a.restore&&(L=1);E=0;if(!p)return error("Missing Channel");if(!c)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");W((p.join?p.join(","):""+p).split(","),function(a){var b=l[a]||{};l[U=a]={name:a,e:b.e,d:b.d,f:1,a:T=c,h:r,i:w,j:u};h&&(e.subscribe({channel:a+G,callback:h}),!b.f&&!i&&e.here_now({channel:a,callback:function(b){W("uuids"in b?b.uuids:[],function(d){h({action:"join",
uuid:d,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});b=function(){e._reset_offline();clearTimeout(V);V=X(I,100)};if(!D)return F.push(b);b()},here_now:function(a,b){var b=a.callback||b,d=a.error||q(),c=a.channel,e=v(),f=k;if(!c)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);t({a:e,data:f,c:function(a){b(a)},b:d,url:[z,"v2","presence","sub_key",g,"channel",Z(c)]})},xdr:t,ready:ga,db:A,uuid:R,each:W,
map:Y,grep:ea,supplant:fa,now:P,unique:ba,updater:da,poll_online:function(){M()||e._reset_offline();X(e.poll_online,O)},poll_online2:function(){e.time(function(a){a||e._reset_offline();X(e.poll_online2,u)})}};B||(B=e.uuid());A.set(g+"uuid",B);X(e.poll_online,O);X(e.poll_online2,u);return e}
function Na(a){function b(a){f||(f=1,clearTimeout(u),d&&(d.onerror=d.onload=k,d.abort&&d.abort(),d=k),a&&r())}function c(){if(!n){n=1;clearTimeout(u);try{response=JSON.parse(d.responseText)}catch(a){return b(1)}g(response)}}var d,f=0,n=0,u=X(function(){b(1)},Oa),r=a.b||q(),g=a.c||q();try{d="undefined"!==typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(){b(1)};d.onload=d.onloadend=c;d.timeout=Oa;url=a.url.join(Pa);if(a.data){var w=[];url+="?";for(key in a.data)w.push(key+
"="+a.data[key]);url+=w.join(Qa)}d.open("GET",url,j);d.send()}catch(y){return b(0),Na(a)}return b}function Ra(a,b,c){W(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=j,a.returnValue=m,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,m):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}
function Sa(a){a.db=Ta;a.xdr=Na;var b=ka(a);b.init=Sa;if(a.notest)return b;Ra("beforeunload",window,function(){each_channel(function(a){b.LEAVE(a.name,1)});return j});Ra("offline",window,b._reset_offline);Ra("offline",document,b._reset_offline);b.ready();return b}var Pa="/",Qa="&",Oa=31E4,Ta,Wa="undefined"!=typeof localStorage&&localStorage;
Ta={get:function(a){try{return Wa?Wa.getItem(a):-1==document.cookie.indexOf(a)?k:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||k}catch(b){}},set:function(a,b){try{if(Wa)return Wa.setItem(a,b)&&0;document.cookie=a+"="+b+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(c){}}};"undefined"!==typeof module&&(module.m=Sa)||"undefined"!==typeof exports&&(exports.k=Sa)||(PUBNUB=Sa);C=1;D=m;F=[];G="-pnpres";H=10;J=310;N=60;O=1E3;aa=/{([\w\-]+)}/g;
function ba(){return"x"+ ++C+""+ +new Date}function P(){return+new Date}var Xa=Math.floor(20*Math.random());Q=function(a,b){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(b?R().split("-")[0]:20>++Xa?Xa:Xa=1))||a};function da(a,b){function c(){f+b>P()?(clearTimeout(d),d=setTimeout(c,b)):(f=P(),a())}var d,f=0;return c}function ea(a,b){var c=[];W(a||[],function(a){b(a)&&c.push(a)});return c}function fa(a,b){return a.replace(aa,function(a,d){return b[d]||a})}
function X(a,b){return setTimeout(a,b)}function R(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b}function W(a,b){if(a&&b)if("undefined"!=typeof a[0])for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function Y(a,b){var c=[];W(a||[],function(a,f){c.push(b(a,f))});return c}
function Z(a){return Y(encodeURIComponent(a).split(""),function(a){return 0>"-_.!~*'()".indexOf(a)?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function $(a){var b=[];W(a,function(a,d){d.f&&b.push(a)});return b.sort()}function ga(){X(function(){D||(D=1,W(F,function(a){a()}))},O)}
function ka(a){function b(){}function c(a){a&&(s.g=0);!s.g&&s.length&&(s.g=1,t(s.shift()))}function d(a){W($(l),function(b){(b=l[b])&&a(b)})}var f=+a.windowing||H,n=(+a.timeout||J)*O,u=(+a.keepalive||N)*O,r=a.publish_key||"",g=a.subscribe_key||"",w=a.ssl?"s":"",y="http"+w+"://"+(a.origin||"pubsub.pubnub.com"),z=Q(y),S=Q(y),s=[],T=0,U=0,K=0,L=0,V=0,E=0,l={},t=a.xdr,M=a._is_online||x(1),v=a.jsonp_cb||x(0),A=a.db||{get:q(),set:q()},B=a.uuid||A&&A.get(g+"uuid")||"",e={_reset_offline:function(){K&&K(1)},
LEAVE:function(a,b){var c={uuid:B},d=Q(y),e=v();0<a.indexOf(G)||("0"!=e&&(c.callback=e),t({l:b||w,timeout:2E3,a:e,data:c,url:[d,"v2","presence","sub_key",g,"channel",Z(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||q(),f=a.channel,n=a.start,l=a.end,h={},i=v();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");h.stringtoken="true";h.count=c;h.reverse=d;i&&(h.callback=
i);n&&(h.start=n);l&&(h.end=l);t({a:i,data:h,c:function(a){b(a)},b:e,url:[z,"v2","history","sub-key",g,"channel",Z(f)]})},replay:function(a){var b=b||a.callback||q(),c=a.source,d=a.destination,e=a.stop,f=a.start,n=a.end,l=a.reverse,a=a.limit,h=v(),i={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");"0"!=h&&(i.callback=h);e&&(i.stop="all");l&&(i.reverse="true");f&&(i.start=
f);n&&(i.end=n);a&&(i.count=a);t({a:h,c:function(a){b(a)},b:function(){b([0,"Disconnected"])},url:[z,"v1","replay",r,g,c,d],data:i})},time:function(a){var b=v();t({a:b,timeout:5*O,url:[z,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,b){var b=b||a.callback||q(),d=a.message,e=a.channel,f=v();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!r)return error("Missing Publish Key");if(!g)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[z,"publish",r,g,0,Z(e),f,Z(d)];s.push({a:f,timeout:5*O,url:e,data:{uuid:B},c:function(a){b(a);c(1)},b:function(){b([0,"Failed",d]);c(1)}});c()},unsubscribe:function(a){a=a.channel;E=0;L=1;a=Y((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+G}).join(",");W(a.split(","),function(a){D&&e.LEAVE(a,0);l[a]=0});D&&b()},subscribe:function(a,c){function s(a){a?X(r,O):(z=Q(y,1),S=Q(y,1),X(function(){e.time(s)},O));d(function(b){if(a&&b.d)return b.d=0,b.j(b.name);!a&&!b.d&&(b.d=1,b.i(b.name))})}
function r(){var a=v(),b=$(l).join(",");b&&(K=t({timeout:Va,a:a,b:function(){e.time(s)},data:{uuid:B},url:[S,"subscribe",g,Z(b),a,E],c:function(a){if(!a)return X(r,ja);d(function(a){a.e||(a.e=1,a.h(a.name))});(E=!E&&L&&A.get(g)||a[1])&&A.set(g,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(l[a]||{}).a||T,(a||U).split(G)[0]]};W(a[0],function(c){var d=b();if(l[d[1]].f)d[0](c,a,d[1])});X(r,ja)}}))}var p=a.channel,c=(c=c||a.callback)||a.message,u=a.connect||q(),
w=a.reconnect||q(),M=a.disconnect||q(),h=a.presence||0,i=a.noheresync||0,Va=a.timeout||n,ja=a.windowing||f;a.restore&&(L=1);E=0;if(!p)return error("Missing Channel");if(!c)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");W((p.join?p.join(","):""+p).split(","),function(a){var b=l[a]||{};l[U=a]={name:a,e:b.e,d:b.d,f:1,a:T=c,h:u,i:M,j:w};h&&(e.subscribe({channel:a+G,callback:h}),!b.f&&!i&&e.here_now({channel:a,callback:function(b){W("uuids"in b?b.uuids:[],function(c){h({action:"join",
uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});b=function(){e._reset_offline();clearTimeout(V);V=X(r,100)};if(!D)return F.push(b);b()},here_now:function(a,b){var b=a.callback||b,c=a.error||q(),d=a.channel,e=v(),f=k;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!g)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);t({a:e,data:f,c:function(a){b(a)},b:c,url:[z,"v2","presence","sub_key",g,"channel",Z(d)]})},xdr:t,ready:ga,db:A,uuid:R,each:W,
map:Y,grep:ea,supplant:fa,now:P,unique:ba,updater:da,poll_online:function(){M()||e._reset_offline();X(e.poll_online,O)},poll_online2:function(){e.time(function(a){a||e._reset_offline();X(e.poll_online2,u)})}};B||(B=e.uuid());A.set(g+"uuid",B);X(e.poll_online,O);X(e.poll_online2,u);return e}
function Ya(a){function b(a){f||(f=1,clearTimeout(u),d&&(d.onerror=d.onload=k,d.abort&&d.abort(),d=k),a&&r())}function c(){if(!n){n=1;clearTimeout(u);try{response=JSON.parse(d.responseText)}catch(a){return b(1)}g(response)}}var d,f=0,n=0,u=X(function(){b(1)},Za),r=a.b||q(),g=a.c||q();try{d="undefined"!==typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(){b(1)};d.onload=d.onloadend=c;d.timeout=Za;url=a.url.join($a);if(a.data){var w=[];url+="?";for(key in a.data)w.push(key+
"="+a.data[key]);url+=w.join(ab)}d.open("GET",url,j);d.send()}catch(y){return b(0),Ya(a)}return b}function bb(a,b,c){W(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=j,a.returnValue=m,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,m):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}
function cb(a){a.db=db;a.xdr=Ya;var b=ka(a);b.init=cb;if(a.notest)return b;bb("beforeunload",window,function(){each_channel(function(a){b.LEAVE(a.name,1)});return j});bb("offline",window,b._reset_offline);bb("offline",document,b._reset_offline);b.ready();return b}var $a="/",ab="&",Za=31E4,db,eb="undefined"!=typeof localStorage&&localStorage;
db={get:function(a){try{return eb?eb.getItem(a):-1==document.cookie.indexOf(a)?k:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||k}catch(b){}},set:function(a,b){try{if(eb)return eb.setItem(a,b)&&0;document.cookie=a+"="+b+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(c){}}};"undefined"!==typeof module&&(module.m=cb)||"undefined"!==typeof exports&&(exports.k=cb)||(PUBNUB=cb);
})();
