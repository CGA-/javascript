// 3.4.2
(function(){
var p=!0,s=null,t=!1;function w(){return function(){}}function aa(b){return function(){return b}}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var ba=1,x=t,z=[],E="-pnpres",ca=10,H=1E4,da=310,ea=60,I=1E3,fa=/{([\w\-]+)}/g;function J(){return"x"+ ++ba+""+ +new Date}function L(){return+new Date}var M,ga=Math.floor(20*Math.random());M=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?N().split("-")[0]:20>++ga?ga:ga=1))||b};
function ha(b,c){function a(){e+c>L()?(clearTimeout(d),d=setTimeout(a,c)):(e=L(),b())}var d,e=0;return a}function ia(b,c){var a=[];O(b||[],function(b){c(b)&&a.push(b)});return a}function ja(b,c){return b.replace(fa,function(a,b){return c[b]||a})}function P(b,c){return setTimeout(b,c)}function N(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function O(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function S(b,c){var a=[];O(b||[],function(b,e){a.push(c(b,e))});return a}function T(b){return S(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function U(b){var c=[];O(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function V(){P(function(){x||(x=1,O(z,function(b){b()}))},I)}
function ka(b){function c(){}function a(a){a&&(n.j=0);!n.j&&n.length&&(n.j=1,A(n.shift()))}function d(a){O(U(y),function(b){(b=y[b])&&a(b)})}var e=+b.windowing||ca,l=(+b.timeout||da)*I,v=(+b.keepalive||ea)*I,k=b.publish_key||"",q=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=M(h),i=M(h),n=[],j=0,m=0,f=0,C=0,K=0,B=0,y={},A=b.xdr,Q=b._is_online||aa(1),D=b.jsonp_cb||aa(0),F=b.db||{get:w(),set:w()},G=b.uuid||F&&F.get(q+"uuid")||"",u={_reset_offline:function(){f&&
f(1)},LEAVE:function(a,b){var c={uuid:G},d=M(h),e=D();0<a.indexOf(E)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",q,"channel",T(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||w(),f=a.channel,h=a.start,i=a.end,l={},j=D();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");l.stringtoken="true";l.count=c;l.reverse=d;j&&(l.callback=
j);h&&(l.start=h);i&&(l.end=i);A({b:j,data:l,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",q,"channel",T(f)]})},replay:function(a){var b=b||a.callback||w(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,l=D(),j={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!k)return error("Missing Publish Key");if(!q)return error("Missing Subscribe Key");"0"!=l&&(j.callback=l);e&&(j.stop="all");i&&(j.reverse="true");f&&(j.start=
f);h&&(j.end=h);a&&(j.count=a);A({b:l,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",k,q,c,d],data:j})},time:function(a){var b=D();A({b:b,timeout:5*I,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||w(),d=b.message,e=b.channel,f=D();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!k)return error("Missing Publish Key");if(!q)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",k,q,0,T(e),f,T(d)];n.push({b:f,timeout:5*I,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;C=1;a=S((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+E}).join(",");O(a.split(","),function(a){x&&u.LEAVE(a,0);y[a]=0});x&&c()},subscribe:function(a,b){function r(a){a?P(k,I):(g=M(h,1),i=M(h,1),P(function(){u.time(r)},I));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function k(){var a=D(),b=U(y).join(",");b&&(f=A({timeout:Q,b:a,c:function(){u.time(r)},data:{uuid:G},url:[i,"subscribe",q,T(b),a,B],d:function(a){if(!a)return P(k,$);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&C&&F.get(q)||a[1])&&F.set(q,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(y[a]||{}).b||j,(a||m).split(E)[0]]};O(a[0],function(c){var d=b();if(y[d[1]].h)d[0](c,a,d[1])});P(k,$)}}))}var n=a.channel,b=(b=b||a.callback)||a.message,v=a.connect||w(),Sa=
a.reconnect||w(),Ta=a.disconnect||w(),R=a.presence||0,oa=a.noheresync||0,Q=a.timeout||l,$=a.windowing||e;a.restore&&(C=1);B=0;if(!n)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");O((n.join?n.join(","):""+n).split(","),function(a){var c=y[a]||{};y[m=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:v,l:Ta,m:Sa};R&&(u.subscribe({channel:a+E,callback:R}),!c.h&&!oa&&u.here_now({channel:a,callback:function(b){O("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:L(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){u._reset_offline();clearTimeout(K);K=P(k,100)};if(!x)return z.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||w(),d=a.channel,e=D(),f=s;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",q,"channel",T(d)]})},xdr:A,ready:V,db:F,uuid:N,each:O,
map:S,grep:ia,supplant:ja,now:L,unique:J,updater:ha,poll_online:function(){Q()||u._reset_offline();P(u.poll_online,I)},poll_online2:function(){u.time(function(a){a||u._reset_offline();P(u.poll_online2,v)})}};G||(G=u.uuid());F.set(q+"uuid",G);P(u.poll_online,I);P(u.poll_online2,v);return u}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var la=function(b){return document.getElementById(b)},ma=function(b,c){var a=[];O(b.split(/\s+/),function(b){O((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},na=function(b,c,a){O(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=p,b.returnValue=t,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,t):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},pa=
function(){return ma("head")[0]},qa=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},ra=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},sa=function(b){return document.createElement(b)},ua=function(){return ta||W()?0:J()},xa=function(b){function c(a,b){C||(C=1,a||y(b),m.onerror=s,clearTimeout(K),P(function(){a&&B();var b=la(f),c=b&&b.parentNode;c&&c.removeChild(b)},
I))}if(ta||W()){a:{var a,d,e=function(){if(!v){v=1;clearTimeout(q);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},l=0,v=0,k=b.timeout||H,q=P(function(){g(1)},k),r=b.c||w(),h=b.d||w(),g=function(b){l||(l=1,clearTimeout(q),a&&(a.onerror=a.onload=s,a.abort&&a.abort(),a=s),b&&r())};try{a=W()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=k;var i=b.url.join(va);if(b.data){var e=[],n;console.log(b.data);
i+="?";for(n in b.data)e.push(n+"="+b.data[n]);i+=e.join(wa)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);ta=0;b=xa(b);break a}b=g}return b}var m=sa("script"),i=b.b,f=J(),C=0,K=P(function(){c(1)},b.timeout||H),B=b.c||w(),y=b.d||w();window[i]=function(a){c(0,a)};b.i||(m[ya]=ya);m.onerror=function(){c(1)};m.src=b.url.join(va);if(b.data){i=[];m.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);m.src+=i.join(wa)}qa(m,"id",f);pa().appendChild(m);return c},za=function(){return!("onLine"in
navigator)?1:navigator.onLine},W=function(){if(!Aa||!Aa.get)return 0;var b={id:W.id++,send:w(),abort:function(){b.id={}},open:function(c,a){W[b.id]=b;Aa.get(b.id,a)}};return b},ya="async",va="/",wa="&",ta=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||w());var Ba,Ca=window.localStorage;Ba={get:function(b){try{return Ca?Ca.getItem(b):-1==document.cookie.indexOf(b)?s:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||s}catch(c){}},set:function(b,c){try{if(Ca)return Ca.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Da={list:{},unbind:function(b){Da.list[b]=[]},bind:function(b,c){(Da.list[b]=Da.list[b]||[]).push(c)},fire:function(b,c){O(Da.list[b]||[],function(a){a(c)})}},Ea=la("pubnub")||0,Fa=function(b){b.jsonp&&(ta=0);var c=b.subscribe_key||"";b.uuid||Ba.get(c+"uuid");b.xdr=xa;b.db=Ba;b._is_online=za;b.jsonp_cb=
ua;var a=ka(b);a.css=ra;a.$=la;a.create=sa;a.bind=na;a.head=pa;a.search=ma;a.attr=qa;a.events=Da;a.init=Fa;if(b.notest)return a;na("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return p});na("offline",window,a._reset_offline);na("offline",document,a._reset_offline);return a};na("load",window,function(){P(V,0)});var Ga=Ea||{};PUBNUB=Fa({notest:1,publish_key:qa(Ga,"pub-key"),subscribe_key:qa(Ga,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==qa(Ga,"ssl"),
origin:qa(Ga,"origin"),uuid:qa(Ga,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&V();var Aa=la("pubnubs")||0;if(Ea){ra(Ea,{position:"absolute",top:-I});if("opera"in window||qa(Ea,"flash"))Ea.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return W[b].onerror();
W[b].responseText=unescape(c);W[b].onload()};W.id=I}}
var Ha=PUBNUB.ws=function(b,c){if(!(this instanceof Ha))return new Ha(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ha.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Ia=PUBNUB.ws=function(b,c){if(!(this instanceof Ia))return new Ia(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ia.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();ba=1;x=t;z=[];E="-pnpres";ca=10;H=1E4;da=310;ea=60;I=1E3;fa=/{([\w\-]+)}/g;function J(){return"x"+ ++ba+""+ +new Date}function L(){return+new Date}var Ja=Math.floor(20*Math.random());M=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?N().split("-")[0]:20>++Ja?Ja:Ja=1))||b};
function ha(b,c){function a(){e+c>L()?(clearTimeout(d),d=setTimeout(a,c)):(e=L(),b())}var d,e=0;return a}function ia(b,c){var a=[];O(b||[],function(b){c(b)&&a.push(b)});return a}function ja(b,c){return b.replace(fa,function(a,b){return c[b]||a})}function P(b,c){return setTimeout(b,c)}function N(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function O(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function S(b,c){var a=[];O(b||[],function(b,e){a.push(c(b,e))});return a}function T(b){return S(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function U(b){var c=[];O(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function V(){P(function(){x||(x=1,O(z,function(b){b()}))},I)}
function ka(b){function c(){}function a(a){a&&(n.j=0);!n.j&&n.length&&(n.j=1,A(n.shift()))}function d(a){O(U(y),function(b){(b=y[b])&&a(b)})}var e=+b.windowing||ca,l=(+b.timeout||da)*I,v=(+b.keepalive||ea)*I,k=b.publish_key||"",q=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=M(h),i=M(h),n=[],j=0,m=0,f=0,C=0,K=0,B=0,y={},A=b.xdr,Q=b._is_online||aa(1),D=b.jsonp_cb||aa(0),F=b.db||{get:w(),set:w()},G=b.uuid||F&&F.get(q+"uuid")||"",u={_reset_offline:function(){f&&
f(1)},LEAVE:function(a,b){var c={uuid:G},d=M(h),e=D();0<a.indexOf(E)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",q,"channel",T(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||w(),f=a.channel,h=a.start,i=a.end,j={},l=D();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;l&&(j.callback=
l);h&&(j.start=h);i&&(j.end=i);A({b:l,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",q,"channel",T(f)]})},replay:function(a){var b=b||a.callback||w(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=D(),l={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!k)return error("Missing Publish Key");if(!q)return error("Missing Subscribe Key");"0"!=j&&(l.callback=j);e&&(l.stop="all");i&&(l.reverse="true");f&&(l.start=
f);h&&(l.end=h);a&&(l.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",k,q,c,d],data:l})},time:function(a){var b=D();A({b:b,timeout:5*I,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||w(),d=b.message,e=b.channel,f=D();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!k)return error("Missing Publish Key");if(!q)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",k,q,0,T(e),f,T(d)];n.push({b:f,timeout:5*I,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;C=1;a=S((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+E}).join(",");O(a.split(","),function(a){x&&u.LEAVE(a,0);y[a]=0});x&&c()},subscribe:function(a,b){function k(a){a?P(r,I):(g=M(h,1),i=M(h,1),P(function(){u.time(k)},I));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function r(){var a=D(),b=U(y).join(",");b&&(f=A({timeout:Ua,b:a,c:function(){u.time(k)},data:{uuid:G},url:[i,"subscribe",q,T(b),a,B],d:function(a){if(!a)return P(r,$);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&C&&F.get(q)||a[1])&&F.set(q,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(y[a]||{}).b||j,(a||m).split(E)[0]]};O(a[0],function(c){var d=b();if(y[d[1]].h)d[0](c,a,d[1])});P(r,$)}}))}var n=a.channel,b=(b=b||a.callback)||a.message,v=a.connect||w(),Sa=
a.reconnect||w(),Q=a.disconnect||w(),R=a.presence||0,oa=a.noheresync||0,Ua=a.timeout||l,$=a.windowing||e;a.restore&&(C=1);B=0;if(!n)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");O((n.join?n.join(","):""+n).split(","),function(a){var c=y[a]||{};y[m=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:v,l:Q,m:Sa};R&&(u.subscribe({channel:a+E,callback:R}),!c.h&&!oa&&u.here_now({channel:a,callback:function(b){O("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:L(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){u._reset_offline();clearTimeout(K);K=P(r,100)};if(!x)return z.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||w(),d=a.channel,e=D(),f=s;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",q,"channel",T(d)]})},xdr:A,ready:V,db:F,uuid:N,each:O,
map:S,grep:ia,supplant:ja,now:L,unique:J,updater:ha,poll_online:function(){Q()||u._reset_offline();P(u.poll_online,I)},poll_online2:function(){u.time(function(a){a||u._reset_offline();P(u.poll_online2,v)})}};G||(G=u.uuid());F.set(q+"uuid",G);P(u.poll_online,I);P(u.poll_online2,v);return u}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Ka=function(b){return document.getElementById(b)},La=function(b,c){var a=[];O(b.split(/\s+/),function(b){O((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Ma=function(b,c,a){O(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=p,b.returnValue=t,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,t):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Na=
function(){return La("head")[0]},Oa=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Pa=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Qa=function(b){return document.createElement(b)},Va=function(){return Ra||X()?0:J()},Ya=function(b){function c(a,b){C||(C=1,a||y(b),m.onerror=s,clearTimeout(K),P(function(){a&&B();var b=Ka(f),c=b&&b.parentNode;c&&c.removeChild(b)},
I))}if(Ra||X()){a:{var a,d,e=function(){if(!v){v=1;clearTimeout(q);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},l=0,v=0,k=b.timeout||H,q=P(function(){g(1)},k),r=b.c||w(),h=b.d||w(),g=function(b){l||(l=1,clearTimeout(q),a&&(a.onerror=a.onload=s,a.abort&&a.abort(),a=s),b&&r())};try{a=X()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=k;var i=b.url.join(Wa);if(b.data){var e=[],n;console.log(b.data);
i+="?";for(n in b.data)e.push(n+"="+b.data[n]);i+=e.join(Xa)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Ra=0;b=Ya(b);break a}b=g}return b}var m=Qa("script"),i=b.b,f=J(),C=0,K=P(function(){c(1)},b.timeout||H),B=b.c||w(),y=b.d||w();window[i]=function(a){c(0,a)};b.i||(m[Za]=Za);m.onerror=function(){c(1)};m.src=b.url.join(Wa);if(b.data){i=[];m.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);m.src+=i.join(Xa)}Oa(m,"id",f);Na().appendChild(m);return c},$a=function(){return!("onLine"in
navigator)?1:navigator.onLine},X=function(){if(!ab||!ab.get)return 0;var b={id:X.id++,send:w(),abort:function(){b.id={}},open:function(c,a){X[b.id]=b;ab.get(b.id,a)}};return b},Za="async",Wa="/",Xa="&",Ra=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||w());var bb,cb=window.localStorage;bb={get:function(b){try{return cb?cb.getItem(b):-1==document.cookie.indexOf(b)?s:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||s}catch(c){}},set:function(b,c){try{if(cb)return cb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var db={list:{},unbind:function(b){db.list[b]=[]},bind:function(b,c){(db.list[b]=db.list[b]||[]).push(c)},fire:function(b,c){O(db.list[b]||[],function(a){a(c)})}},eb=Ka("pubnub")||0,fb=function(b){b.jsonp&&(Ra=0);var c=b.subscribe_key||"";b.uuid||bb.get(c+"uuid");b.xdr=Ya;b.db=bb;b._is_online=$a;b.jsonp_cb=
Va;var a=ka(b);a.css=Pa;a.$=Ka;a.create=Qa;a.bind=Ma;a.head=Na;a.search=La;a.attr=Oa;a.events=db;a.init=fb;if(b.notest)return a;Ma("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return p});Ma("offline",window,a._reset_offline);Ma("offline",document,a._reset_offline);return a};Ma("load",window,function(){P(V,0)});var gb=eb||{};PUBNUB=fb({notest:1,publish_key:Oa(gb,"pub-key"),subscribe_key:Oa(gb,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Oa(gb,"ssl"),
origin:Oa(gb,"origin"),uuid:Oa(gb,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&V();var ab=Ka("pubnubs")||0;if(eb){Pa(eb,{position:"absolute",top:-I});if("opera"in window||Oa(eb,"flash"))eb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return X[b].onerror();
X[b].responseText=unescape(c);X[b].onload()};X.id=I}}
var hb=PUBNUB.ws=function(b,c){if(!(this instanceof hb))return new hb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
hb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var ib=PUBNUB.ws=function(b,c){if(!(this instanceof ib))return new ib(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
ib.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var jb=function(b){return document.getElementById(b)},kb=function(b,c){var a=[];O(b.split(/\s+/),function(b){O((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},lb=function(b,c,a){O(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=p,b.returnValue=t,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,t):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},mb=
function(){return kb("head")[0]},nb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},ob=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},pb=function(b){return document.createElement(b)},rb=function(){return qb||Y()?0:J()},ub=function(b){function c(a,b){C||(C=1,a||y(b),m.onerror=s,clearTimeout(K),P(function(){a&&B();var b=jb(f),c=b&&b.parentNode;c&&c.removeChild(b)},
I))}if(qb||Y()){a:{var a,d,e=function(){if(!v){v=1;clearTimeout(q);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},l=0,v=0,k=b.timeout||H,q=P(function(){g(1)},k),r=b.c||w(),h=b.d||w(),g=function(b){l||(l=1,clearTimeout(q),a&&(a.onerror=a.onload=s,a.abort&&a.abort(),a=s),b&&r())};try{a=Y()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=k;var i=b.url.join(sb);if(b.data){var e=[],n;console.log(b.data);
i+="?";for(n in b.data)e.push(n+"="+b.data[n]);i+=e.join(tb)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);qb=0;b=ub(b);break a}b=g}return b}var m=pb("script"),i=b.b,f=J(),C=0,K=P(function(){c(1)},b.timeout||H),B=b.c||w(),y=b.d||w();window[i]=function(a){c(0,a)};b.i||(m[vb]=vb);m.onerror=function(){c(1)};m.src=b.url.join(sb);if(b.data){i=[];m.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);m.src+=i.join(tb)}nb(m,"id",f);mb().appendChild(m);return c},wb=function(){return!("onLine"in
navigator)?1:navigator.onLine},Y=function(){if(!xb||!xb.get)return 0;var b={id:Y.id++,send:w(),abort:function(){b.id={}},open:function(c,a){Y[b.id]=b;xb.get(b.id,a)}};return b},vb="async",sb="/",tb="&",qb=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||w());var yb,zb=window.localStorage;yb={get:function(b){try{return zb?zb.getItem(b):-1==document.cookie.indexOf(b)?s:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||s}catch(c){}},set:function(b,c){try{if(zb)return zb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Ab={list:{},unbind:function(b){Ab.list[b]=[]},bind:function(b,c){(Ab.list[b]=Ab.list[b]||[]).push(c)},fire:function(b,c){O(Ab.list[b]||[],function(a){a(c)})}},Bb=jb("pubnub")||0,Cb=function(b){b.jsonp&&(qb=0);var c=b.subscribe_key||"";b.uuid||yb.get(c+"uuid");b.xdr=ub;b.db=yb;b._is_online=wb;b.jsonp_cb=
rb;var a=ka(b);a.css=ob;a.$=jb;a.create=pb;a.bind=lb;a.head=mb;a.search=kb;a.attr=nb;a.events=Ab;a.init=Cb;if(b.notest)return a;lb("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return p});lb("offline",window,a._reset_offline);lb("offline",document,a._reset_offline);return a};lb("load",window,function(){P(V,0)});var Db=Bb||{};PUBNUB=Cb({notest:1,publish_key:nb(Db,"pub-key"),subscribe_key:nb(Db,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==nb(Db,"ssl"),
origin:nb(Db,"origin"),uuid:nb(Db,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&V();var xb=jb("pubnubs")||0;if(Bb){ob(Bb,{position:"absolute",top:-I});if("opera"in window||nb(Bb,"flash"))Bb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Y[b].onerror();
Y[b].responseText=unescape(c);Y[b].onload()};Y.id=I}}
var Eb=PUBNUB.ws=function(b,c){if(!(this instanceof Eb))return new Eb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Eb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Fb=PUBNUB.ws=function(b,c){if(!(this instanceof Fb))return new Fb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Fb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();ba=1;x=t;z=[];E="-pnpres";ca=10;H=1E4;da=310;ea=60;I=1E3;fa=/{([\w\-]+)}/g;function J(){return"x"+ ++ba+""+ +new Date}function L(){return+new Date}var Gb=Math.floor(20*Math.random());M=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?N().split("-")[0]:20>++Gb?Gb:Gb=1))||b};
function ha(b,c){function a(){e+c>L()?(clearTimeout(d),d=setTimeout(a,c)):(e=L(),b())}var d,e=0;return a}function ia(b,c){var a=[];O(b||[],function(b){c(b)&&a.push(b)});return a}function ja(b,c){return b.replace(fa,function(a,b){return c[b]||a})}function P(b,c){return setTimeout(b,c)}function N(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function O(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function S(b,c){var a=[];O(b||[],function(b,e){a.push(c(b,e))});return a}function T(b){return S(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function U(b){var c=[];O(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function V(){P(function(){x||(x=1,O(z,function(b){b()}))},I)}
function ka(b){function c(){}function a(a){a&&(n.j=0);!n.j&&n.length&&(n.j=1,A(n.shift()))}function d(a){O(U(y),function(b){(b=y[b])&&a(b)})}var e=+b.windowing||ca,l=(+b.timeout||da)*I,v=(+b.keepalive||ea)*I,k=b.publish_key||"",q=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=M(h),i=M(h),n=[],j=0,m=0,f=0,C=0,K=0,B=0,y={},A=b.xdr,Q=b._is_online||aa(1),D=b.jsonp_cb||aa(0),F=b.db||{get:w(),set:w()},G=b.uuid||F&&F.get(q+"uuid")||"",u={_reset_offline:function(){f&&
f(1)},LEAVE:function(a,b){var c={uuid:G},d=M(h),e=D();0<a.indexOf(E)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",q,"channel",T(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||w(),f=a.channel,h=a.start,i=a.end,j={},l=D();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;l&&(j.callback=
l);h&&(j.start=h);i&&(j.end=i);A({b:l,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",q,"channel",T(f)]})},replay:function(a){var b=b||a.callback||w(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=D(),l={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!k)return error("Missing Publish Key");if(!q)return error("Missing Subscribe Key");"0"!=j&&(l.callback=j);e&&(l.stop="all");i&&(l.reverse="true");f&&(l.start=
f);h&&(l.end=h);a&&(l.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",k,q,c,d],data:l})},time:function(a){var b=D();A({b:b,timeout:5*I,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||w(),d=b.message,e=b.channel,f=D();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!k)return error("Missing Publish Key");if(!q)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",k,q,0,T(e),f,T(d)];n.push({b:f,timeout:5*I,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;C=1;a=S((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+E}).join(",");O(a.split(","),function(a){x&&u.LEAVE(a,0);y[a]=0});x&&c()},subscribe:function(a,b){function k(a){a?P(n,I):(g=M(h,1),i=M(h,1),P(function(){u.time(k)},I));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function n(){var a=D(),b=U(y).join(",");b&&(f=A({timeout:Ua,b:a,c:function(){u.time(k)},data:{uuid:G},url:[i,"subscribe",q,T(b),a,B],d:function(a){if(!a)return P(n,$);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&C&&F.get(q)||a[1])&&F.set(q,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(y[a]||{}).b||j,(a||m).split(E)[0]]};O(a[0],function(c){var d=b();if(y[d[1]].h)d[0](c,a,d[1])});P(n,$)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,v=a.connect||w(),Q=
a.reconnect||w(),Ta=a.disconnect||w(),R=a.presence||0,oa=a.noheresync||0,Ua=a.timeout||l,$=a.windowing||e;a.restore&&(C=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");O((r.join?r.join(","):""+r).split(","),function(a){var c=y[a]||{};y[m=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:v,l:Ta,m:Q};R&&(u.subscribe({channel:a+E,callback:R}),!c.h&&!oa&&u.here_now({channel:a,callback:function(b){O("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:L(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){u._reset_offline();clearTimeout(K);K=P(n,100)};if(!x)return z.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||w(),d=a.channel,e=D(),f=s;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!q)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",q,"channel",T(d)]})},xdr:A,ready:V,db:F,uuid:N,each:O,
map:S,grep:ia,supplant:ja,now:L,unique:J,updater:ha,poll_online:function(){Q()||u._reset_offline();P(u.poll_online,I)},poll_online2:function(){u.time(function(a){a||u._reset_offline();P(u.poll_online2,v)})}};G||(G=u.uuid());F.set(q+"uuid",G);P(u.poll_online,I);P(u.poll_online2,v);return u}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return s}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=v[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,n,j,m=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof k&&(f=k.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=l;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){n=f.length;for(h=0;h<n;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+m+"]":"["+j.join(",")+"]";e=m;return i}if(k&&"object"===typeof k){n=k.length;for(h=0;h<n;h+=1)g=k[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
m+"}":"{"+j.join(",")+"}";e=m;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;l=e="";if("number"===typeof d)for(g=0;g<d;g+=1)l+=" ";else"string"===typeof d&&(l=d);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Hb=function(b){return document.getElementById(b)},Ib=function(b,c){var a=[];O(b.split(/\s+/),function(b){O((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Jb=function(b,c,a){O(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=p,b.returnValue=t,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,t):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Kb=
function(){return Ib("head")[0]},Lb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Mb=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Nb=function(b){return document.createElement(b)},Pb=function(){return Ob||Z()?0:J()},Sb=function(b){function c(a,b){C||(C=1,a||y(b),m.onerror=s,clearTimeout(K),P(function(){a&&B();var b=Hb(f),c=b&&b.parentNode;c&&c.removeChild(b)},
I))}if(Ob||Z()){a:{var a,d,e=function(){if(!v){v=1;clearTimeout(q);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},l=0,v=0,k=b.timeout||H,q=P(function(){g(1)},k),r=b.c||w(),h=b.d||w(),g=function(b){l||(l=1,clearTimeout(q),a&&(a.onerror=a.onload=s,a.abort&&a.abort(),a=s),b&&r())};try{a=Z()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=k;var i=b.url.join(Qb);if(b.data){var e=[],n;console.log(b.data);
i+="?";for(n in b.data)e.push(n+"="+b.data[n]);i+=e.join(Rb)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Ob=0;b=Sb(b);break a}b=g}return b}var m=Nb("script"),i=b.b,f=J(),C=0,K=P(function(){c(1)},b.timeout||H),B=b.c||w(),y=b.d||w();window[i]=function(a){c(0,a)};b.i||(m[Tb]=Tb);m.onerror=function(){c(1)};m.src=b.url.join(Qb);if(b.data){i=[];m.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);m.src+=i.join(Rb)}Lb(m,"id",f);Kb().appendChild(m);return c},Ub=function(){return!("onLine"in
navigator)?1:navigator.onLine},Z=function(){if(!Vb||!Vb.get)return 0;var b={id:Z.id++,send:w(),abort:function(){b.id={}},open:function(c,a){Z[b.id]=b;Vb.get(b.id,a)}};return b},Tb="async",Qb="/",Rb="&",Ob=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||w());var Wb,Xb=window.localStorage;Wb={get:function(b){try{return Xb?Xb.getItem(b):-1==document.cookie.indexOf(b)?s:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||s}catch(c){}},set:function(b,c){try{if(Xb)return Xb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Yb={list:{},unbind:function(b){Yb.list[b]=[]},bind:function(b,c){(Yb.list[b]=Yb.list[b]||[]).push(c)},fire:function(b,c){O(Yb.list[b]||[],function(a){a(c)})}},Zb=Hb("pubnub")||0,$b=function(b){b.jsonp&&(Ob=0);var c=b.subscribe_key||"";b.uuid||Wb.get(c+"uuid");b.xdr=Sb;b.db=Wb;b._is_online=Ub;b.jsonp_cb=
Pb;var a=ka(b);a.css=Mb;a.$=Hb;a.create=Nb;a.bind=Jb;a.head=Kb;a.search=Ib;a.attr=Lb;a.events=Yb;a.init=$b;if(b.notest)return a;Jb("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return p});Jb("offline",window,a._reset_offline);Jb("offline",document,a._reset_offline);return a};Jb("load",window,function(){P(V,0)});var ac=Zb||{};PUBNUB=$b({notest:1,publish_key:Lb(ac,"pub-key"),subscribe_key:Lb(ac,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Lb(ac,"ssl"),
origin:Lb(ac,"origin"),uuid:Lb(ac,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&V();var Vb=Hb("pubnubs")||0;if(Zb){Mb(Zb,{position:"absolute",top:-I});if("opera"in window||Lb(Zb,"flash"))Zb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Z[b].onerror();
Z[b].responseText=unescape(c);Z[b].onload()};Z.id=I}}
var bc=PUBNUB.ws=function(b,c){if(!(this instanceof bc))return new bc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
bc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var cc=PUBNUB.ws=function(b,c){if(!(this instanceof cc))return new cc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
w();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=t;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:t,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
cc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
})();
