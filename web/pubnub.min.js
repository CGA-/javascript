// 3.4.3
(function(){
function q(b){throw b;}var t=!0,u=null,v=!1;function y(){return function(){}}function z(b){return function(){return b}}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var E=1,H=v,I=[],K="-pnpres",L=10,M=1E4,aa=310,ba=60,N=1E3,ca=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function Q(){return+new Date}var S,da=Math.floor(20*Math.random());S=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?T().split("-")[0]:20>++da?da:da=1))||b};
function ea(b,c){function a(){e+c>Q()?(clearTimeout(d),d=setTimeout(a,c)):(e=Q(),b())}var d,e=0;return a}function fa(b,c){var a=[];U(b||[],function(b){c(b)&&a.push(b)});return a}function ka(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function V(b,c){return setTimeout(b,c)}function T(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function U(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function W(b,c){var a=[];U(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return W(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];U(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){V(function(){H||(H=1,U(I,function(b){b()}))},N)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){U(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||L,k=(+b.timeout||aa)*N,w=(+b.keepalive||ba)*N,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=S(h),i=S(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||z(1),C=b.jsonp_cb||z(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=S(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,k={},j=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");k.stringtoken="true";k.count=c;k.reverse=d;j&&(k.callback=
j);h&&(k.start=h);i&&(k.end=i);A({b:j,data:k,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,k=C(),j={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=k&&(j.callback=k);e&&(j.stop="all");i&&(j.reverse="true");f&&(j.start=
f);h&&(j.end=h);a&&(j.count=a);A({b:k,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:j})},time:function(a){var b=C();A({b:b,timeout:5*N,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*N,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=W((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");U(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function r(a){a?V(l,N):(g=S(h,1),i=S(h,1),V(function(){s.time(r)},N));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function l(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ha,b:a,c:function(){s.time(r)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return V(l,P);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};U(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});V(l,P)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,nd=a.connect||y(),
w=a.reconnect||y(),ja=a.disconnect||y(),R=a.presence||0,ga=a.noheresync||0,ha=a.timeout||k,P=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");U((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:nd,l:ja,m:w};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){U("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:Q(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=V(l,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:T,each:U,
map:W,grep:fa,supplant:ka,now:Q,unique:O,updater:ea,poll_online:function(){P()||s._reset_offline();V(s.poll_online,N)},poll_online2:function(){s.time(function(a){a||s._reset_offline();V(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);V(s.poll_online,N);V(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var la=function(b){return document.getElementById(b)},ma=function(b,c){var a=[];U(b.split(/\s+/),function(b){U((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},na=function(b,c,a){U(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},oa=
function(){return ma("head")[0]},pa=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},qa=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},ra=function(b){return document.createElement(b)},ua=function(){return sa||ta()?0:O()},xa=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),V(function(){a&&B();var b=la(f),c=b&&b.parentNode;c&&c.removeChild(b)},
N))}if(sa||ta()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||M,p=V(function(){g(1)},l),r=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&r())};try{a=ta()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(va);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(wa)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);sa=0;b=xa(b);break a}b=g}return b}var n=ra("script"),i=b.b,f=O(),D=0,J=V(function(){c(1)},b.timeout||M),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[za]=za);n.onerror=function(){c(1)};n.src=b.url.join(va);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(wa)}pa(n,"id",f);oa().appendChild(n);return c},Aa=function(){return!("onLine"in
navigator)?1:navigator.onLine},ta=function(){if(!Ba||!Ba.get)return 0;var b={id:ta.id++,send:y(),abort:function(){b.id={}},open:function(c,a){ta[b.id]=b;Ba.get(b.id,a)}};return b},za="async",va="/",wa="&",sa=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Ca,Da=window.localStorage;Ca={get:function(b){try{return Da?Da.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Da)return Da.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Ea={list:{},unbind:function(b){Ea.list[b]=[]},bind:function(b,c){(Ea.list[b]=Ea.list[b]||[]).push(c)},fire:function(b,c){U(Ea.list[b]||[],function(a){a(c)})}},Fa=la("pubnub")||0,Ga=function(b){b.jsonp&&(sa=0);var c=b.subscribe_key||"";b.uuid||Ca.get(c+"uuid");b.xdr=xa;b.db=Ca;b._is_online=Aa;b.jsonp_cb=
ua;var a=$(b);a.css=qa;a.$=la;a.create=ra;a.bind=na;a.head=oa;a.search=ma;a.attr=pa;a.events=Ea;a.init=Ga;if(b.notest)return a;na("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});na("offline",window,a._reset_offline);na("offline",document,a._reset_offline);return a};na("load",window,function(){V(Z,0)});var Ha=Fa||{};PUBNUB=Ga({notest:1,publish_key:pa(Ha,"pub-key"),subscribe_key:pa(Ha,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==pa(Ha,"ssl"),
origin:pa(Ha,"origin"),uuid:pa(Ha,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Ba=la("pubnubs")||0;if(Fa){qa(Fa,{position:"absolute",top:-N});if("opera"in window||pa(Fa,"flash"))Fa.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return ta[b].onerror();
ta[b].responseText=unescape(c);ta[b].onload()};ta.id=N}}
var Ia=PUBNUB.ws=function(b,c){if(!(this instanceof Ia))return new Ia(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ia.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Ja=PUBNUB.ws=function(b,c){if(!(this instanceof Ja))return new Ja(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ja.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";L=10;M=1E4;aa=310;ba=60;N=1E3;ca=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function Q(){return+new Date}var Ka=Math.floor(20*Math.random());S=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?T().split("-")[0]:20>++Ka?Ka:Ka=1))||b};
function ea(b,c){function a(){e+c>Q()?(clearTimeout(d),d=setTimeout(a,c)):(e=Q(),b())}var d,e=0;return a}function fa(b,c){var a=[];U(b||[],function(b){c(b)&&a.push(b)});return a}function ka(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function V(b,c){return setTimeout(b,c)}function T(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function U(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function W(b,c){var a=[];U(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return W(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];U(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){V(function(){H||(H=1,U(I,function(b){b()}))},N)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){U(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||L,k=(+b.timeout||aa)*N,w=(+b.keepalive||ba)*N,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=S(h),i=S(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||z(1),C=b.jsonp_cb||z(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=S(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*N,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*N,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=W((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");U(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?V(r,N):(g=S(h,1),i=S(h,1),V(function(){s.time(l)},N));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function r(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ha,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return V(r,P);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};U(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});V(r,P)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||y(),ya=
a.reconnect||y(),ja=a.disconnect||y(),R=a.presence||0,ga=a.noheresync||0,ha=a.timeout||k,P=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");U((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ja,m:ya};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){U("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:Q(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=V(r,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:T,each:U,
map:W,grep:fa,supplant:ka,now:Q,unique:O,updater:ea,poll_online:function(){P()||s._reset_offline();V(s.poll_online,N)},poll_online2:function(){s.time(function(a){a||s._reset_offline();V(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);V(s.poll_online,N);V(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var La=function(b){return document.getElementById(b)},Ma=function(b,c){var a=[];U(b.split(/\s+/),function(b){U((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Na=function(b,c,a){U(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Oa=
function(){return Ma("head")[0]},Pa=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Qa=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Ra=function(b){return document.createElement(b)},Ua=function(){return Sa||Ta()?0:O()},Xa=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),V(function(){a&&B();var b=La(f),c=b&&b.parentNode;c&&c.removeChild(b)},
N))}if(Sa||Ta()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||M,p=V(function(){g(1)},l),r=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&r())};try{a=Ta()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Va);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Wa)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Sa=0;b=Xa(b);break a}b=g}return b}var n=Ra("script"),i=b.b,f=O(),D=0,J=V(function(){c(1)},b.timeout||M),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Ya]=Ya);n.onerror=function(){c(1)};n.src=b.url.join(Va);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Wa)}Pa(n,"id",f);Oa().appendChild(n);return c},Za=function(){return!("onLine"in
navigator)?1:navigator.onLine},Ta=function(){if(!$a||!$a.get)return 0;var b={id:Ta.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Ta[b.id]=b;$a.get(b.id,a)}};return b},Ya="async",Va="/",Wa="&",Sa=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var ab,bb=window.localStorage;ab={get:function(b){try{return bb?bb.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(bb)return bb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var cb={list:{},unbind:function(b){cb.list[b]=[]},bind:function(b,c){(cb.list[b]=cb.list[b]||[]).push(c)},fire:function(b,c){U(cb.list[b]||[],function(a){a(c)})}},db=La("pubnub")||0,eb=function(b){b.jsonp&&(Sa=0);var c=b.subscribe_key||"";b.uuid||ab.get(c+"uuid");b.xdr=Xa;b.db=ab;b._is_online=Za;b.jsonp_cb=
Ua;var a=$(b);a.css=Qa;a.$=La;a.create=Ra;a.bind=Na;a.head=Oa;a.search=Ma;a.attr=Pa;a.events=cb;a.init=eb;if(b.notest)return a;Na("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Na("offline",window,a._reset_offline);Na("offline",document,a._reset_offline);return a};Na("load",window,function(){V(Z,0)});var fb=db||{};PUBNUB=eb({notest:1,publish_key:Pa(fb,"pub-key"),subscribe_key:Pa(fb,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Pa(fb,"ssl"),
origin:Pa(fb,"origin"),uuid:Pa(fb,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var $a=La("pubnubs")||0;if(db){Qa(db,{position:"absolute",top:-N});if("opera"in window||Pa(db,"flash"))db.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Ta[b].onerror();
Ta[b].responseText=unescape(c);Ta[b].onload()};Ta.id=N}}
var gb=PUBNUB.ws=function(b,c){if(!(this instanceof gb))return new gb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
gb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var hb=PUBNUB.ws=function(b,c){if(!(this instanceof hb))return new hb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
hb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var ib=function(b){return document.getElementById(b)},jb=function(b,c){var a=[];U(b.split(/\s+/),function(b){U((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},kb=function(b,c,a){U(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},lb=
function(){return jb("head")[0]},mb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},nb=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},ob=function(b){return document.createElement(b)},rb=function(){return pb||qb()?0:O()},ub=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),V(function(){a&&B();var b=ib(f),c=b&&b.parentNode;c&&c.removeChild(b)},
N))}if(pb||qb()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||M,p=V(function(){g(1)},l),r=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&r())};try{a=qb()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(sb);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(tb)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);pb=0;b=ub(b);break a}b=g}return b}var n=ob("script"),i=b.b,f=O(),D=0,J=V(function(){c(1)},b.timeout||M),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[vb]=vb);n.onerror=function(){c(1)};n.src=b.url.join(sb);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(tb)}mb(n,"id",f);lb().appendChild(n);return c},wb=function(){return!("onLine"in
navigator)?1:navigator.onLine},qb=function(){if(!xb||!xb.get)return 0;var b={id:qb.id++,send:y(),abort:function(){b.id={}},open:function(c,a){qb[b.id]=b;xb.get(b.id,a)}};return b},vb="async",sb="/",tb="&",pb=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var yb,zb=window.localStorage;yb={get:function(b){try{return zb?zb.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(zb)return zb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Ab={list:{},unbind:function(b){Ab.list[b]=[]},bind:function(b,c){(Ab.list[b]=Ab.list[b]||[]).push(c)},fire:function(b,c){U(Ab.list[b]||[],function(a){a(c)})}},Bb=ib("pubnub")||0,Cb=function(b){b.jsonp&&(pb=0);var c=b.subscribe_key||"";b.uuid||yb.get(c+"uuid");b.xdr=ub;b.db=yb;b._is_online=wb;b.jsonp_cb=
rb;var a=$(b);a.css=nb;a.$=ib;a.create=ob;a.bind=kb;a.head=lb;a.search=jb;a.attr=mb;a.events=Ab;a.init=Cb;if(b.notest)return a;kb("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});kb("offline",window,a._reset_offline);kb("offline",document,a._reset_offline);return a};kb("load",window,function(){V(Z,0)});var Db=Bb||{};PUBNUB=Cb({notest:1,publish_key:mb(Db,"pub-key"),subscribe_key:mb(Db,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==mb(Db,"ssl"),
origin:mb(Db,"origin"),uuid:mb(Db,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var xb=ib("pubnubs")||0;if(Bb){nb(Bb,{position:"absolute",top:-N});if("opera"in window||mb(Bb,"flash"))Bb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return qb[b].onerror();
qb[b].responseText=unescape(c);qb[b].onload()};qb.id=N}}
var Eb=PUBNUB.ws=function(b,c){if(!(this instanceof Eb))return new Eb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Eb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Fb=PUBNUB.ws=function(b,c){if(!(this instanceof Fb))return new Fb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Fb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";L=10;M=1E4;aa=310;ba=60;N=1E3;ca=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function Q(){return+new Date}var Gb=Math.floor(20*Math.random());S=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?T().split("-")[0]:20>++Gb?Gb:Gb=1))||b};
function ea(b,c){function a(){e+c>Q()?(clearTimeout(d),d=setTimeout(a,c)):(e=Q(),b())}var d,e=0;return a}function fa(b,c){var a=[];U(b||[],function(b){c(b)&&a.push(b)});return a}function ka(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function V(b,c){return setTimeout(b,c)}function T(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function U(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function W(b,c){var a=[];U(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return W(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];U(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){V(function(){H||(H=1,U(I,function(b){b()}))},N)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){U(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||L,k=(+b.timeout||aa)*N,w=(+b.keepalive||ba)*N,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=S(h),i=S(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||z(1),C=b.jsonp_cb||z(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=S(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*N,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*N,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=W((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");U(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?V(m,N):(g=S(h,1),i=S(h,1),V(function(){s.time(l)},N));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:P,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return V(m,ia);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};U(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});V(m,ia)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||y(),
ya=a.reconnect||y(),ja=a.disconnect||y(),R=a.presence||0,ga=a.noheresync||0,P=a.timeout||k,ia=a.windowing||e;a.restore&&(D=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");U((r.join?r.join(","):""+r).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ja,m:ya};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){U("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:Q(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=V(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:T,each:U,
map:W,grep:fa,supplant:ka,now:Q,unique:O,updater:ea,poll_online:function(){P()||s._reset_offline();V(s.poll_online,N)},poll_online2:function(){s.time(function(a){a||s._reset_offline();V(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);V(s.poll_online,N);V(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Hb=function(b){return document.getElementById(b)},Ib=function(b,c){var a=[];U(b.split(/\s+/),function(b){U((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Jb=function(b,c,a){U(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Kb=
function(){return Ib("head")[0]},Lb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Mb=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Nb=function(b){return document.createElement(b)},Qb=function(){return Ob||Pb()?0:O()},Tb=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),V(function(){a&&B();var b=Hb(f),c=b&&b.parentNode;c&&c.removeChild(b)},
N))}if(Ob||Pb()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||M,p=V(function(){g(1)},l),r=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&r())};try{a=Pb()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Rb);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Sb)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Ob=0;b=Tb(b);break a}b=g}return b}var n=Nb("script"),i=b.b,f=O(),D=0,J=V(function(){c(1)},b.timeout||M),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Ub]=Ub);n.onerror=function(){c(1)};n.src=b.url.join(Rb);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Sb)}Lb(n,"id",f);Kb().appendChild(n);return c},Vb=function(){return!("onLine"in
navigator)?1:navigator.onLine},Pb=function(){if(!Wb||!Wb.get)return 0;var b={id:Pb.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Pb[b.id]=b;Wb.get(b.id,a)}};return b},Ub="async",Rb="/",Sb="&",Ob=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Xb,Yb=window.localStorage;Xb={get:function(b){try{return Yb?Yb.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Yb)return Yb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Zb={list:{},unbind:function(b){Zb.list[b]=[]},bind:function(b,c){(Zb.list[b]=Zb.list[b]||[]).push(c)},fire:function(b,c){U(Zb.list[b]||[],function(a){a(c)})}},$b=Hb("pubnub")||0,ac=function(b){b.jsonp&&(Ob=0);var c=b.subscribe_key||"";b.uuid||Xb.get(c+"uuid");b.xdr=Tb;b.db=Xb;b._is_online=Vb;b.jsonp_cb=
Qb;var a=$(b);a.css=Mb;a.$=Hb;a.create=Nb;a.bind=Jb;a.head=Kb;a.search=Ib;a.attr=Lb;a.events=Zb;a.init=ac;if(b.notest)return a;Jb("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Jb("offline",window,a._reset_offline);Jb("offline",document,a._reset_offline);return a};Jb("load",window,function(){V(Z,0)});var bc=$b||{};PUBNUB=ac({notest:1,publish_key:Lb(bc,"pub-key"),subscribe_key:Lb(bc,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Lb(bc,"ssl"),
origin:Lb(bc,"origin"),uuid:Lb(bc,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Wb=Hb("pubnubs")||0;if($b){Mb($b,{position:"absolute",top:-N});if("opera"in window||Lb($b,"flash"))$b.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Pb[b].onerror();
Pb[b].responseText=unescape(c);Pb[b].onload()};Pb.id=N}}
var dc=PUBNUB.ws=function(b,c){if(!(this instanceof dc))return new dc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
dc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var ec=PUBNUB.ws=function(b,c){if(!(this instanceof ec))return new ec(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
ec.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";L=10;M=1E4;aa=310;ba=60;N=1E3;ca=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function Q(){return+new Date}var fc=Math.floor(20*Math.random());S=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?T().split("-")[0]:20>++fc?fc:fc=1))||b};
function ea(b,c){function a(){e+c>Q()?(clearTimeout(d),d=setTimeout(a,c)):(e=Q(),b())}var d,e=0;return a}function fa(b,c){var a=[];U(b||[],function(b){c(b)&&a.push(b)});return a}function ka(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function V(b,c){return setTimeout(b,c)}function T(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function U(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function W(b,c){var a=[];U(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return W(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];U(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){V(function(){H||(H=1,U(I,function(b){b()}))},N)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){U(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||L,k=(+b.timeout||aa)*N,w=(+b.keepalive||ba)*N,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=S(h),i=S(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||z(1),C=b.jsonp_cb||z(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=S(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*N,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*N,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=W((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");U(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?V(m,N):(g=S(h,1),i=S(h,1),V(function(){s.time(l)},N));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ha,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return V(m,ia);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};U(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});V(m,ia)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||y(),
ya=a.reconnect||y(),P=a.disconnect||y(),R=a.presence||0,ga=a.noheresync||0,ha=a.timeout||k,ia=a.windowing||e;a.restore&&(D=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");U((r.join?r.join(","):""+r).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:P,m:ya};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){U("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:Q(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=V(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:T,each:U,
map:W,grep:fa,supplant:ka,now:Q,unique:O,updater:ea,poll_online:function(){P()||s._reset_offline();V(s.poll_online,N)},poll_online2:function(){s.time(function(a){a||s._reset_offline();V(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);V(s.poll_online,N);V(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var gc=function(b){return document.getElementById(b)},hc=function(b,c){var a=[];U(b.split(/\s+/),function(b){U((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},ic=function(b,c,a){U(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},jc=
function(){return hc("head")[0]},kc=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},lc=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},mc=function(b){return document.createElement(b)},pc=function(){return nc||oc()?0:O()},sc=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),V(function(){a&&B();var b=gc(f),c=b&&b.parentNode;c&&c.removeChild(b)},
N))}if(nc||oc()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||M,p=V(function(){g(1)},l),r=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&r())};try{a=oc()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(qc);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(rc)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);nc=0;b=sc(b);break a}b=g}return b}var n=mc("script"),i=b.b,f=O(),D=0,J=V(function(){c(1)},b.timeout||M),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[tc]=tc);n.onerror=function(){c(1)};n.src=b.url.join(qc);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(rc)}kc(n,"id",f);jc().appendChild(n);return c},uc=function(){return!("onLine"in
navigator)?1:navigator.onLine},oc=function(){if(!vc||!vc.get)return 0;var b={id:oc.id++,send:y(),abort:function(){b.id={}},open:function(c,a){oc[b.id]=b;vc.get(b.id,a)}};return b},tc="async",qc="/",rc="&",nc=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var wc,xc=window.localStorage;wc={get:function(b){try{return xc?xc.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(xc)return xc.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var yc={list:{},unbind:function(b){yc.list[b]=[]},bind:function(b,c){(yc.list[b]=yc.list[b]||[]).push(c)},fire:function(b,c){U(yc.list[b]||[],function(a){a(c)})}},zc=gc("pubnub")||0,Ac=function(b){b.jsonp&&(nc=0);var c=b.subscribe_key||"";b.uuid||wc.get(c+"uuid");b.xdr=sc;b.db=wc;b._is_online=uc;b.jsonp_cb=
pc;var a=$(b);a.css=lc;a.$=gc;a.create=mc;a.bind=ic;a.head=jc;a.search=hc;a.attr=kc;a.events=yc;a.init=Ac;if(b.notest)return a;ic("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});ic("offline",window,a._reset_offline);ic("offline",document,a._reset_offline);return a};ic("load",window,function(){V(Z,0)});var Bc=zc||{};PUBNUB=Ac({notest:1,publish_key:kc(Bc,"pub-key"),subscribe_key:kc(Bc,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==kc(Bc,"ssl"),
origin:kc(Bc,"origin"),uuid:kc(Bc,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var vc=gc("pubnubs")||0;if(zc){lc(zc,{position:"absolute",top:-N});if("opera"in window||kc(zc,"flash"))zc.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return oc[b].onerror();
oc[b].responseText=unescape(c);oc[b].onload()};oc.id=N}}
var Cc=PUBNUB.ws=function(b,c){if(!(this instanceof Cc))return new Cc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Cc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Dc=PUBNUB.ws=function(b,c){if(!(this instanceof Dc))return new Dc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Dc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";L=10;M=1E4;aa=310;ba=60;N=1E3;ca=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function Q(){return+new Date}var Ec=Math.floor(20*Math.random());S=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?T().split("-")[0]:20>++Ec?Ec:Ec=1))||b};
function ea(b,c){function a(){e+c>Q()?(clearTimeout(d),d=setTimeout(a,c)):(e=Q(),b())}var d,e=0;return a}function fa(b,c){var a=[];U(b||[],function(b){c(b)&&a.push(b)});return a}function ka(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function V(b,c){return setTimeout(b,c)}function T(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function U(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function W(b,c){var a=[];U(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return W(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];U(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){V(function(){H||(H=1,U(I,function(b){b()}))},N)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){U(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||L,k=(+b.timeout||aa)*N,w=(+b.keepalive||ba)*N,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=S(h),i=S(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||z(1),C=b.jsonp_cb||z(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=S(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*N,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*N,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=W((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");U(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?V(m,N):(g=S(h,1),i=S(h,1),V(function(){s.time(l)},N));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ha,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return V(m,ia);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};U(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});V(m,ia)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||y(),
P=a.reconnect||y(),ja=a.disconnect||y(),R=a.presence||0,ga=a.noheresync||0,ha=a.timeout||k,ia=a.windowing||e;a.restore&&(D=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");U((r.join?r.join(","):""+r).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ja,m:P};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){U("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:Q(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=V(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:T,each:U,
map:W,grep:fa,supplant:ka,now:Q,unique:O,updater:ea,poll_online:function(){P()||s._reset_offline();V(s.poll_online,N)},poll_online2:function(){s.time(function(a){a||s._reset_offline();V(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);V(s.poll_online,N);V(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Fc=function(b){return document.getElementById(b)},Gc=function(b,c){var a=[];U(b.split(/\s+/),function(b){U((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Hc=function(b,c,a){U(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Ic=
function(){return Gc("head")[0]},Jc=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Kc=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Lc=function(b){return document.createElement(b)},Oc=function(){return Mc||Nc()?0:O()},Rc=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),V(function(){a&&B();var b=Fc(f),c=b&&b.parentNode;c&&c.removeChild(b)},
N))}if(Mc||Nc()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||M,p=V(function(){g(1)},l),r=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&r())};try{a=Nc()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Pc);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Qc)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Mc=0;b=Rc(b);break a}b=g}return b}var n=Lc("script"),i=b.b,f=O(),D=0,J=V(function(){c(1)},b.timeout||M),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Sc]=Sc);n.onerror=function(){c(1)};n.src=b.url.join(Pc);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Qc)}Jc(n,"id",f);Ic().appendChild(n);return c},Tc=function(){return!("onLine"in
navigator)?1:navigator.onLine},Nc=function(){if(!Uc||!Uc.get)return 0;var b={id:Nc.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Nc[b.id]=b;Uc.get(b.id,a)}};return b},Sc="async",Pc="/",Qc="&",Mc=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Vc,Wc=window.localStorage;Vc={get:function(b){try{return Wc?Wc.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Wc)return Wc.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Xc={list:{},unbind:function(b){Xc.list[b]=[]},bind:function(b,c){(Xc.list[b]=Xc.list[b]||[]).push(c)},fire:function(b,c){U(Xc.list[b]||[],function(a){a(c)})}},Yc=Fc("pubnub")||0,Zc=function(b){b.jsonp&&(Mc=0);var c=b.subscribe_key||"";b.uuid||Vc.get(c+"uuid");b.xdr=Rc;b.db=Vc;b._is_online=Tc;b.jsonp_cb=
Oc;var a=$(b);a.css=Kc;a.$=Fc;a.create=Lc;a.bind=Hc;a.head=Ic;a.search=Gc;a.attr=Jc;a.events=Xc;a.init=Zc;if(b.notest)return a;Hc("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Hc("offline",window,a._reset_offline);Hc("offline",document,a._reset_offline);return a};Hc("load",window,function(){V(Z,0)});var $c=Yc||{};PUBNUB=Zc({notest:1,publish_key:Jc($c,"pub-key"),subscribe_key:Jc($c,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Jc($c,"ssl"),
origin:Jc($c,"origin"),uuid:Jc($c,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Uc=Fc("pubnubs")||0;if(Yc){Kc(Yc,{position:"absolute",top:-N});if("opera"in window||Jc(Yc,"flash"))Yc.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Nc[b].onerror();
Nc[b].responseText=unescape(c);Nc[b].onload()};Nc.id=N}}
var ad=PUBNUB.ws=function(b,c){if(!(this instanceof ad))return new ad(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
ad.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var bd=PUBNUB.ws=function(b,c){if(!(this instanceof bd))return new bd(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
bd.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";L=10;M=1E4;aa=310;ba=60;N=1E3;ca=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function Q(){return+new Date}var cd=Math.floor(20*Math.random());S=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?T().split("-")[0]:20>++cd?cd:cd=1))||b};
function ea(b,c){function a(){e+c>Q()?(clearTimeout(d),d=setTimeout(a,c)):(e=Q(),b())}var d,e=0;return a}function fa(b,c){var a=[];U(b||[],function(b){c(b)&&a.push(b)});return a}function ka(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function V(b,c){return setTimeout(b,c)}function T(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function U(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function W(b,c){var a=[];U(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return W(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];U(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){V(function(){H||(H=1,U(I,function(b){b()}))},N)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){U(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||L,k=(+b.timeout||aa)*N,w=(+b.keepalive||ba)*N,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=S(h),i=S(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||z(1),C=b.jsonp_cb||z(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=S(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*N,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*N,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=W((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");U(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?V(m,N):(g=S(h,1),i=S(h,1),V(function(){s.time(l)},N));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ia,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return V(m,cc);d(function(a){a.g||(a.g=1,a.k(a.name))});B=!B&&D&&F.get(p)||a[1];ha&&(Timetoken=1E4,ha=0);F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};U(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});V(m,cc)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,
w=a.connect||y(),P=a.reconnect||y(),ja=a.disconnect||y(),R=a.presence||0,ga=a.noheresync||0,ha=a.backfill||0,ia=a.timeout||k,cc=a.windowing||e;a.restore&&(D=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");U((r.join?r.join(","):""+r).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ja,m:P};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){U("uuids"in
b?b.uuids:[],function(c){R({action:"join",uuid:c,timestamp:Q(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=V(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",
X(d)]})},xdr:A,ready:Z,db:F,uuid:T,each:U,map:W,grep:fa,supplant:ka,now:Q,unique:O,updater:ea,poll_online:function(){P()||s._reset_offline();V(s.poll_online,N)},poll_online2:function(){s.time(function(a){a||s._reset_offline();V(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);V(s.poll_online,N);V(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&q(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var dd=function(b){return document.getElementById(b)},ed=function(b,c){var a=[];U(b.split(/\s+/),function(b){U((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},fd=function(b,c,a){U(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},gd=
function(){return ed("head")[0]},hd=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},id=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},jd=function(b){return document.createElement(b)},md=function(){return kd||ld()?0:O()},qd=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),V(function(){a&&B();var b=dd(f),c=b&&b.parentNode;c&&c.removeChild(b)},
N))}if(kd||ld()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||M,p=V(function(){g(1)},l),r=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&r())};try{a=ld()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(od);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(pd)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);kd=0;b=qd(b);break a}b=g}return b}var n=jd("script"),i=b.b,f=O(),D=0,J=V(function(){c(1)},b.timeout||M),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[rd]=rd);n.onerror=function(){c(1)};n.src=b.url.join(od);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(pd)}hd(n,"id",f);gd().appendChild(n);return c},sd=function(){return!("onLine"in
navigator)?1:navigator.onLine},ld=function(){if(!td||!td.get)return 0;var b={id:ld.id++,send:y(),abort:function(){b.id={}},open:function(c,a){ld[b.id]=b;td.get(b.id,a)}};return b},rd="async",od="/",pd="&",kd=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var ud,vd=window.localStorage;ud={get:function(b){try{return vd?vd.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(vd)return vd.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var wd={list:{},unbind:function(b){wd.list[b]=[]},bind:function(b,c){(wd.list[b]=wd.list[b]||[]).push(c)},fire:function(b,c){U(wd.list[b]||[],function(a){a(c)})}},xd=dd("pubnub")||0,yd=function(b){b.jsonp&&(kd=0);var c=b.subscribe_key||"";b.uuid||ud.get(c+"uuid");b.xdr=qd;b.db=ud;b._is_online=sd;b.jsonp_cb=
md;var a=$(b);a.css=id;a.$=dd;a.create=jd;a.bind=fd;a.head=gd;a.search=ed;a.attr=hd;a.events=wd;a.init=yd;if(b.notest)return a;fd("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});fd("offline",window,a._reset_offline);fd("offline",document,a._reset_offline);return a};fd("load",window,function(){V(Z,0)});var zd=xd||{};PUBNUB=yd({notest:1,publish_key:hd(zd,"pub-key"),subscribe_key:hd(zd,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==hd(zd,"ssl"),
origin:hd(zd,"origin"),uuid:hd(zd,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var td=dd("pubnubs")||0;if(xd){id(xd,{position:"absolute",top:-N});if("opera"in window||hd(xd,"flash"))xd.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return ld[b].onerror();
ld[b].responseText=unescape(c);ld[b].onload()};ld.id=N}}
var Ad=PUBNUB.ws=function(b,c){if(!(this instanceof Ad))return new Ad(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ad.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Bd=PUBNUB.ws=function(b,c){if(!(this instanceof Bd))return new Bd(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Bd.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
})();
