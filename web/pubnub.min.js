// 3.4.2
(function(){
var q=!0,t=null,u=!1;function v(){return function(){}}function y(b){return function(){return b}}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var z=1,E=u,H=[],I="-pnpres",K=10,L=1E4,aa=310,ba=60,M=1E3,ca=/{([\w\-]+)}/g;function N(){return"x"+ ++z+""+ +new Date}function O(){return+new Date}var Q,da=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++da?da:da=1))||b};
function ea(b,c){function a(){e+c>O()?(clearTimeout(d),d=setTimeout(a,c)):(e=O(),b())}var d,e=0;return a}function fa(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function ha(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){E||(E=1,T(H,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||K,k=(+b.timeout||aa)*M,w=(+b.keepalive||ba)*M,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||y(1),C=b.jsonp_cb||y(0),F=b.db||{get:v(),set:v()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(I)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||v(),f=a.channel,h=a.start,i=a.end,k={},j=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");k.stringtoken="true";k.count=c;k.reverse=d;j&&(k.callback=
j);h&&(k.start=h);i&&(k.end=i);A({b:j,data:k,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||v(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,k=C(),j={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=k&&(j.callback=k);e&&(j.stop="all");i&&(j.reverse="true");f&&(j.start=
f);h&&(j.end=h);a&&(j.count=a);A({b:k,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:j})},time:function(a){var b=C();A({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||v(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+I}).join(",");T(a.split(","),function(a){E&&s.LEAVE(a,0);x[a]=0});E&&c()},subscribe:function(a,b){function r(a){a?U(l,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(r)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function l(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ua,b:a,c:function(){s.time(r)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(l,P);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(I)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(l,P)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,Pc=a.connect||v(),
w=a.reconnect||v(),ta=a.disconnect||v(),R=a.presence||0,ga=a.noheresync||0,ua=a.timeout||k,P=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:Pc,l:ta,m:w};R&&(s.subscribe({channel:a+I,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:O(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(l,100)};if(!E)return H.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||v(),d=a.channel,e=C(),f=t;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:S,each:T,
map:V,grep:fa,supplant:ha,now:O,unique:N,updater:ea,poll_online:function(){P()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var ia=function(b){return document.getElementById(b)},ja=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},ka=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=q,b.returnValue=u,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,u):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},la=
function(){return ja("head")[0]},ma=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},na=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},oa=function(b){return document.createElement(b)},ra=function(){return pa||qa()?0:N()},wa=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=t,clearTimeout(J),U(function(){a&&B();var b=ia(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(pa||qa()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),r=b.c||v(),h=b.d||v(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=t,a.abort&&a.abort(),a=t),b&&r())};try{a=qa()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(sa);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(va)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);pa=0;b=wa(b);break a}b=g}return b}var n=oa("script"),i=b.b,f=N(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||v(),x=b.d||v();window[i]=function(a){c(0,a)};b.i||(n[xa]=xa);n.onerror=function(){c(1)};n.src=b.url.join(sa);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(va)}ma(n,"id",f);la().appendChild(n);return c},ya=function(){return!("onLine"in
navigator)?1:navigator.onLine},qa=function(){if(!za||!za.get)return 0;var b={id:qa.id++,send:v(),abort:function(){b.id={}},open:function(c,a){qa[b.id]=b;za.get(b.id,a)}};return b},xa="async",sa="/",va="&",pa=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||v());var Aa,Ba=window.localStorage;Aa={get:function(b){try{return Ba?Ba.getItem(b):-1==document.cookie.indexOf(b)?t:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||t}catch(c){}},set:function(b,c){try{if(Ba)return Ba.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Ca={list:{},unbind:function(b){Ca.list[b]=[]},bind:function(b,c){(Ca.list[b]=Ca.list[b]||[]).push(c)},fire:function(b,c){T(Ca.list[b]||[],function(a){a(c)})}},Da=ia("pubnub")||0,Ea=function(b){b.jsonp&&(pa=0);var c=b.subscribe_key||"";b.uuid||Aa.get(c+"uuid");b.xdr=wa;b.db=Aa;b._is_online=ya;b.jsonp_cb=
ra;var a=$(b);a.css=na;a.$=ia;a.create=oa;a.bind=ka;a.head=la;a.search=ja;a.attr=ma;a.events=Ca;a.init=Ea;if(b.notest)return a;ka("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return q});ka("offline",window,a._reset_offline);ka("offline",document,a._reset_offline);return a};ka("load",window,function(){U(Z,0)});var Fa=Da||{};PUBNUB=Ea({notest:1,publish_key:ma(Fa,"pub-key"),subscribe_key:ma(Fa,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==ma(Fa,"ssl"),
origin:ma(Fa,"origin"),uuid:ma(Fa,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var za=ia("pubnubs")||0;if(Da){na(Da,{position:"absolute",top:-M});if("opera"in window||ma(Da,"flash"))Da.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return qa[b].onerror();
qa[b].responseText=unescape(c);qa[b].onload()};qa.id=M}}
var Ga=PUBNUB.ws=function(b,c){if(!(this instanceof Ga))return new Ga(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ga.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Ha=PUBNUB.ws=function(b,c){if(!(this instanceof Ha))return new Ha(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ha.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();z=1;E=u;H=[];I="-pnpres";K=10;L=1E4;aa=310;ba=60;M=1E3;ca=/{([\w\-]+)}/g;function N(){return"x"+ ++z+""+ +new Date}function O(){return+new Date}var Ia=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++Ia?Ia:Ia=1))||b};
function ea(b,c){function a(){e+c>O()?(clearTimeout(d),d=setTimeout(a,c)):(e=O(),b())}var d,e=0;return a}function fa(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function ha(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){E||(E=1,T(H,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||K,k=(+b.timeout||aa)*M,w=(+b.keepalive||ba)*M,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||y(1),C=b.jsonp_cb||y(0),F=b.db||{get:v(),set:v()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(I)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||v(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||v(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||v(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+I}).join(",");T(a.split(","),function(a){E&&s.LEAVE(a,0);x[a]=0});E&&c()},subscribe:function(a,b){function l(a){a?U(r,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function r(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:P,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(r,W);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(I)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(r,W)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||v(),lb=
a.reconnect||v(),ta=a.disconnect||v(),R=a.presence||0,ga=a.noheresync||0,P=a.timeout||k,W=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ta,m:lb};R&&(s.subscribe({channel:a+I,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:O(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(r,100)};if(!E)return H.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||v(),d=a.channel,e=C(),f=t;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:S,each:T,
map:V,grep:fa,supplant:ha,now:O,unique:N,updater:ea,poll_online:function(){P()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Ja=function(b){return document.getElementById(b)},Ka=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},La=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=q,b.returnValue=u,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,u):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Ma=
function(){return Ka("head")[0]},Na=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Oa=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Pa=function(b){return document.createElement(b)},Sa=function(){return Qa||Ra()?0:N()},Va=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=t,clearTimeout(J),U(function(){a&&B();var b=Ja(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(Qa||Ra()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),r=b.c||v(),h=b.d||v(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=t,a.abort&&a.abort(),a=t),b&&r())};try{a=Ra()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Ta);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Ua)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Qa=0;b=Va(b);break a}b=g}return b}var n=Pa("script"),i=b.b,f=N(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||v(),x=b.d||v();window[i]=function(a){c(0,a)};b.i||(n[Wa]=Wa);n.onerror=function(){c(1)};n.src=b.url.join(Ta);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Ua)}Na(n,"id",f);Ma().appendChild(n);return c},Xa=function(){return!("onLine"in
navigator)?1:navigator.onLine},Ra=function(){if(!Ya||!Ya.get)return 0;var b={id:Ra.id++,send:v(),abort:function(){b.id={}},open:function(c,a){Ra[b.id]=b;Ya.get(b.id,a)}};return b},Wa="async",Ta="/",Ua="&",Qa=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||v());var Za,$a=window.localStorage;Za={get:function(b){try{return $a?$a.getItem(b):-1==document.cookie.indexOf(b)?t:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||t}catch(c){}},set:function(b,c){try{if($a)return $a.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var ab={list:{},unbind:function(b){ab.list[b]=[]},bind:function(b,c){(ab.list[b]=ab.list[b]||[]).push(c)},fire:function(b,c){T(ab.list[b]||[],function(a){a(c)})}},bb=Ja("pubnub")||0,cb=function(b){b.jsonp&&(Qa=0);var c=b.subscribe_key||"";b.uuid||Za.get(c+"uuid");b.xdr=Va;b.db=Za;b._is_online=Xa;b.jsonp_cb=
Sa;var a=$(b);a.css=Oa;a.$=Ja;a.create=Pa;a.bind=La;a.head=Ma;a.search=Ka;a.attr=Na;a.events=ab;a.init=cb;if(b.notest)return a;La("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return q});La("offline",window,a._reset_offline);La("offline",document,a._reset_offline);return a};La("load",window,function(){U(Z,0)});var db=bb||{};PUBNUB=cb({notest:1,publish_key:Na(db,"pub-key"),subscribe_key:Na(db,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Na(db,"ssl"),
origin:Na(db,"origin"),uuid:Na(db,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Ya=Ja("pubnubs")||0;if(bb){Oa(bb,{position:"absolute",top:-M});if("opera"in window||Na(bb,"flash"))bb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Ra[b].onerror();
Ra[b].responseText=unescape(c);Ra[b].onload()};Ra.id=M}}
var eb=PUBNUB.ws=function(b,c){if(!(this instanceof eb))return new eb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
eb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var fb=PUBNUB.ws=function(b,c){if(!(this instanceof fb))return new fb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
fb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var gb=function(b){return document.getElementById(b)},hb=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},ib=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=q,b.returnValue=u,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,u):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},jb=
function(){return hb("head")[0]},kb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},mb=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},nb=function(b){return document.createElement(b)},qb=function(){return ob||pb()?0:N()},tb=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=t,clearTimeout(J),U(function(){a&&B();var b=gb(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(ob||pb()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),r=b.c||v(),h=b.d||v(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=t,a.abort&&a.abort(),a=t),b&&r())};try{a=pb()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(rb);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(sb)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);ob=0;b=tb(b);break a}b=g}return b}var n=nb("script"),i=b.b,f=N(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||v(),x=b.d||v();window[i]=function(a){c(0,a)};b.i||(n[ub]=ub);n.onerror=function(){c(1)};n.src=b.url.join(rb);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(sb)}kb(n,"id",f);jb().appendChild(n);return c},vb=function(){return!("onLine"in
navigator)?1:navigator.onLine},pb=function(){if(!wb||!wb.get)return 0;var b={id:pb.id++,send:v(),abort:function(){b.id={}},open:function(c,a){pb[b.id]=b;wb.get(b.id,a)}};return b},ub="async",rb="/",sb="&",ob=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||v());var xb,yb=window.localStorage;xb={get:function(b){try{return yb?yb.getItem(b):-1==document.cookie.indexOf(b)?t:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||t}catch(c){}},set:function(b,c){try{if(yb)return yb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var zb={list:{},unbind:function(b){zb.list[b]=[]},bind:function(b,c){(zb.list[b]=zb.list[b]||[]).push(c)},fire:function(b,c){T(zb.list[b]||[],function(a){a(c)})}},Ab=gb("pubnub")||0,Bb=function(b){b.jsonp&&(ob=0);var c=b.subscribe_key||"";b.uuid||xb.get(c+"uuid");b.xdr=tb;b.db=xb;b._is_online=vb;b.jsonp_cb=
qb;var a=$(b);a.css=mb;a.$=gb;a.create=nb;a.bind=ib;a.head=jb;a.search=hb;a.attr=kb;a.events=zb;a.init=Bb;if(b.notest)return a;ib("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return q});ib("offline",window,a._reset_offline);ib("offline",document,a._reset_offline);return a};ib("load",window,function(){U(Z,0)});var Cb=Ab||{};PUBNUB=Bb({notest:1,publish_key:kb(Cb,"pub-key"),subscribe_key:kb(Cb,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==kb(Cb,"ssl"),
origin:kb(Cb,"origin"),uuid:kb(Cb,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var wb=gb("pubnubs")||0;if(Ab){mb(Ab,{position:"absolute",top:-M});if("opera"in window||kb(Ab,"flash"))Ab.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return pb[b].onerror();
pb[b].responseText=unescape(c);pb[b].onload()};pb.id=M}}
var Db=PUBNUB.ws=function(b,c){if(!(this instanceof Db))return new Db(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Db.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Eb=PUBNUB.ws=function(b,c){if(!(this instanceof Eb))return new Eb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Eb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();z=1;E=u;H=[];I="-pnpres";K=10;L=1E4;aa=310;ba=60;M=1E3;ca=/{([\w\-]+)}/g;function N(){return"x"+ ++z+""+ +new Date}function O(){return+new Date}var Fb=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++Fb?Fb:Fb=1))||b};
function ea(b,c){function a(){e+c>O()?(clearTimeout(d),d=setTimeout(a,c)):(e=O(),b())}var d,e=0;return a}function fa(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function ha(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){E||(E=1,T(H,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||K,k=(+b.timeout||aa)*M,w=(+b.keepalive||ba)*M,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||y(1),C=b.jsonp_cb||y(0),F=b.db||{get:v(),set:v()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(I)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||v(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||v(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||v(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+I}).join(",");T(a.split(","),function(a){E&&s.LEAVE(a,0);x[a]=0});E&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ua,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,W);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(I)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,W)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||v(),lb=
a.reconnect||v(),P=a.disconnect||v(),R=a.presence||0,ga=a.noheresync||0,ua=a.timeout||k,W=a.windowing||e;a.restore&&(D=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((r.join?r.join(","):""+r).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:P,m:lb};R&&(s.subscribe({channel:a+I,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:O(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!E)return H.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||v(),d=a.channel,e=C(),f=t;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:S,each:T,
map:V,grep:fa,supplant:ha,now:O,unique:N,updater:ea,poll_online:function(){P()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Gb=function(b){return document.getElementById(b)},Hb=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Ib=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=q,b.returnValue=u,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,u):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Jb=
function(){return Hb("head")[0]},Kb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Lb=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Mb=function(b){return document.createElement(b)},Pb=function(){return Nb||Ob()?0:N()},Sb=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=t,clearTimeout(J),U(function(){a&&B();var b=Gb(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(Nb||Ob()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),r=b.c||v(),h=b.d||v(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=t,a.abort&&a.abort(),a=t),b&&r())};try{a=Ob()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Qb);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Rb)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Nb=0;b=Sb(b);break a}b=g}return b}var n=Mb("script"),i=b.b,f=N(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||v(),x=b.d||v();window[i]=function(a){c(0,a)};b.i||(n[Tb]=Tb);n.onerror=function(){c(1)};n.src=b.url.join(Qb);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Rb)}Kb(n,"id",f);Jb().appendChild(n);return c},Ub=function(){return!("onLine"in
navigator)?1:navigator.onLine},Ob=function(){if(!Vb||!Vb.get)return 0;var b={id:Ob.id++,send:v(),abort:function(){b.id={}},open:function(c,a){Ob[b.id]=b;Vb.get(b.id,a)}};return b},Tb="async",Qb="/",Rb="&",Nb=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||v());var Wb,Xb=window.localStorage;Wb={get:function(b){try{return Xb?Xb.getItem(b):-1==document.cookie.indexOf(b)?t:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||t}catch(c){}},set:function(b,c){try{if(Xb)return Xb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Yb={list:{},unbind:function(b){Yb.list[b]=[]},bind:function(b,c){(Yb.list[b]=Yb.list[b]||[]).push(c)},fire:function(b,c){T(Yb.list[b]||[],function(a){a(c)})}},Zb=Gb("pubnub")||0,$b=function(b){b.jsonp&&(Nb=0);var c=b.subscribe_key||"";b.uuid||Wb.get(c+"uuid");b.xdr=Sb;b.db=Wb;b._is_online=Ub;b.jsonp_cb=
Pb;var a=$(b);a.css=Lb;a.$=Gb;a.create=Mb;a.bind=Ib;a.head=Jb;a.search=Hb;a.attr=Kb;a.events=Yb;a.init=$b;if(b.notest)return a;Ib("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return q});Ib("offline",window,a._reset_offline);Ib("offline",document,a._reset_offline);return a};Ib("load",window,function(){U(Z,0)});var ac=Zb||{};PUBNUB=$b({notest:1,publish_key:Kb(ac,"pub-key"),subscribe_key:Kb(ac,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Kb(ac,"ssl"),
origin:Kb(ac,"origin"),uuid:Kb(ac,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Vb=Gb("pubnubs")||0;if(Zb){Lb(Zb,{position:"absolute",top:-M});if("opera"in window||Kb(Zb,"flash"))Zb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Ob[b].onerror();
Ob[b].responseText=unescape(c);Ob[b].onload()};Ob.id=M}}
var bc=PUBNUB.ws=function(b,c){if(!(this instanceof bc))return new bc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
bc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var cc=PUBNUB.ws=function(b,c){if(!(this instanceof cc))return new cc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
cc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();z=1;E=u;H=[];I="-pnpres";K=10;L=1E4;aa=310;ba=60;M=1E3;ca=/{([\w\-]+)}/g;function N(){return"x"+ ++z+""+ +new Date}function O(){return+new Date}var dc=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++dc?dc:dc=1))||b};
function ea(b,c){function a(){e+c>O()?(clearTimeout(d),d=setTimeout(a,c)):(e=O(),b())}var d,e=0;return a}function fa(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function ha(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){E||(E=1,T(H,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||K,k=(+b.timeout||aa)*M,w=(+b.keepalive||ba)*M,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||y(1),C=b.jsonp_cb||y(0),F=b.db||{get:v(),set:v()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(I)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||v(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||v(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||v(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+I}).join(",");T(a.split(","),function(a){E&&s.LEAVE(a,0);x[a]=0});E&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ua,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,W);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(I)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,W)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||v(),P=
a.reconnect||v(),ta=a.disconnect||v(),R=a.presence||0,ga=a.noheresync||0,ua=a.timeout||k,W=a.windowing||e;a.restore&&(D=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((r.join?r.join(","):""+r).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ta,m:P};R&&(s.subscribe({channel:a+I,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:O(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!E)return H.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||v(),d=a.channel,e=C(),f=t;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:S,each:T,
map:V,grep:fa,supplant:ha,now:O,unique:N,updater:ea,poll_online:function(){P()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var ec=function(b){return document.getElementById(b)},fc=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},gc=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=q,b.returnValue=u,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,u):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},hc=
function(){return fc("head")[0]},ic=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},jc=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},kc=function(b){return document.createElement(b)},nc=function(){return lc||mc()?0:N()},qc=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=t,clearTimeout(J),U(function(){a&&B();var b=ec(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(lc||mc()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),r=b.c||v(),h=b.d||v(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=t,a.abort&&a.abort(),a=t),b&&r())};try{a=mc()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(oc);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(pc)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);lc=0;b=qc(b);break a}b=g}return b}var n=kc("script"),i=b.b,f=N(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||v(),x=b.d||v();window[i]=function(a){c(0,a)};b.i||(n[rc]=rc);n.onerror=function(){c(1)};n.src=b.url.join(oc);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(pc)}ic(n,"id",f);hc().appendChild(n);return c},sc=function(){return!("onLine"in
navigator)?1:navigator.onLine},mc=function(){if(!tc||!tc.get)return 0;var b={id:mc.id++,send:v(),abort:function(){b.id={}},open:function(c,a){mc[b.id]=b;tc.get(b.id,a)}};return b},rc="async",oc="/",pc="&",lc=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||v());var uc,vc=window.localStorage;uc={get:function(b){try{return vc?vc.getItem(b):-1==document.cookie.indexOf(b)?t:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||t}catch(c){}},set:function(b,c){try{if(vc)return vc.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var wc={list:{},unbind:function(b){wc.list[b]=[]},bind:function(b,c){(wc.list[b]=wc.list[b]||[]).push(c)},fire:function(b,c){T(wc.list[b]||[],function(a){a(c)})}},xc=ec("pubnub")||0,yc=function(b){b.jsonp&&(lc=0);var c=b.subscribe_key||"";b.uuid||uc.get(c+"uuid");b.xdr=qc;b.db=uc;b._is_online=sc;b.jsonp_cb=
nc;var a=$(b);a.css=jc;a.$=ec;a.create=kc;a.bind=gc;a.head=hc;a.search=fc;a.attr=ic;a.events=wc;a.init=yc;if(b.notest)return a;gc("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return q});gc("offline",window,a._reset_offline);gc("offline",document,a._reset_offline);return a};gc("load",window,function(){U(Z,0)});var zc=xc||{};PUBNUB=yc({notest:1,publish_key:ic(zc,"pub-key"),subscribe_key:ic(zc,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==ic(zc,"ssl"),
origin:ic(zc,"origin"),uuid:ic(zc,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var tc=ec("pubnubs")||0;if(xc){jc(xc,{position:"absolute",top:-M});if("opera"in window||ic(xc,"flash"))xc.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return mc[b].onerror();
mc[b].responseText=unescape(c);mc[b].onload()};mc.id=M}}
var Ac=PUBNUB.ws=function(b,c){if(!(this instanceof Ac))return new Ac(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ac.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Bc=PUBNUB.ws=function(b,c){if(!(this instanceof Bc))return new Bc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Bc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();z=1;E=u;H=[];I="-pnpres";K=10;L=1E4;aa=310;ba=60;M=1E3;ca=/{([\w\-]+)}/g;function N(){return"x"+ ++z+""+ +new Date}function O(){return+new Date}var Cc=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++Cc?Cc:Cc=1))||b};
function ea(b,c){function a(){e+c>O()?(clearTimeout(d),d=setTimeout(a,c)):(e=O(),b())}var d,e=0;return a}function fa(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function ha(b,c){return b.replace(ca,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){E||(E=1,T(H,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,A(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||K,k=(+b.timeout||aa)*M,w=(+b.keepalive||ba)*M,l=b.publish_key||"",p=b.subscribe_key||"",r=b.ssl?"s":"",h="http"+r+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},A=b.xdr,P=b._is_online||y(1),C=b.jsonp_cb||y(0),F=b.db||{get:v(),set:v()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(I)||("0"!=e&&(c.callback=e),A({i:b||r,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||v(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);A({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||v(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);A({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();A({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||v(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+I}).join(",");T(a.split(","),function(a){E&&s.LEAVE(a,0);x[a]=0});E&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=A({timeout:ua,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,W);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(I)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,W)}}))}var r=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||v(),P=
a.reconnect||v(),ta=a.disconnect||v(),R=a.presence||0,ga=a.noheresync||0,ua=a.timeout||k,W=a.windowing||e;a.restore&&(D=1);B=0;if(!r)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((r.join?r.join(","):""+r).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ta,m:P};R&&(s.subscribe({channel:a+I,callback:R}),!c.h&&!ga&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:O(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!E)return H.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||v(),d=a.channel,e=C(),f=t;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);A({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:A,ready:Z,db:F,uuid:S,each:T,
map:V,grep:fa,supplant:ha,now:O,unique:N,updater:ea,poll_online:function(){P()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,r){var h,g,i,m,j,n=e,f=r[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(r,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Dc=function(b){return document.getElementById(b)},Ec=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Fc=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=q,b.returnValue=u,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,u):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Gc=
function(){return Ec("head")[0]},Hc=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Ic=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Jc=function(b){return document.createElement(b)},Mc=function(){return Kc||Lc()?0:N()},Qc=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=t,clearTimeout(J),U(function(){a&&B();var b=Dc(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(Kc||Lc()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),r=b.c||v(),h=b.d||v(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=t,a.abort&&a.abort(),a=t),b&&r())};try{a=Lc()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Nc);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Oc)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Kc=0;b=Qc(b);break a}b=g}return b}var n=Jc("script"),i=b.b,f=N(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||v(),x=b.d||v();window[i]=function(a){c(0,a)};b.i||(n[Rc]=Rc);n.onerror=function(){c(1)};n.src=b.url.join(Nc);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Oc)}Hc(n,"id",f);Gc().appendChild(n);return c},Sc=function(){return!("onLine"in
navigator)?1:navigator.onLine},Lc=function(){if(!Tc||!Tc.get)return 0;var b={id:Lc.id++,send:v(),abort:function(){b.id={}},open:function(c,a){Lc[b.id]=b;Tc.get(b.id,a)}};return b},Rc="async",Nc="/",Oc="&",Kc=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||v());var Uc,Vc=window.localStorage;Uc={get:function(b){try{return Vc?Vc.getItem(b):-1==document.cookie.indexOf(b)?t:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||t}catch(c){}},set:function(b,c){try{if(Vc)return Vc.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Wc={list:{},unbind:function(b){Wc.list[b]=[]},bind:function(b,c){(Wc.list[b]=Wc.list[b]||[]).push(c)},fire:function(b,c){T(Wc.list[b]||[],function(a){a(c)})}},Xc=Dc("pubnub")||0,Yc=function(b){b.jsonp&&(Kc=0);var c=b.subscribe_key||"";b.uuid||Uc.get(c+"uuid");b.xdr=Qc;b.db=Uc;b._is_online=Sc;b.jsonp_cb=
Mc;var a=$(b);a.css=Ic;a.$=Dc;a.create=Jc;a.bind=Fc;a.head=Gc;a.search=Ec;a.attr=Hc;a.events=Wc;a.init=Yc;if(b.notest)return a;Fc("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return q});Fc("offline",window,a._reset_offline);Fc("offline",document,a._reset_offline);return a};Fc("load",window,function(){U(Z,0)});var Zc=Xc||{};PUBNUB=Yc({notest:1,publish_key:Hc(Zc,"pub-key"),subscribe_key:Hc(Zc,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Hc(Zc,"ssl"),
origin:Hc(Zc,"origin"),uuid:Hc(Zc,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Tc=Dc("pubnubs")||0;if(Xc){Ic(Xc,{position:"absolute",top:-M});if("opera"in window||Hc(Xc,"flash"))Xc.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Lc[b].onerror();
Lc[b].responseText=unescape(c);Lc[b].onload()};Lc.id=M}}
var $c=PUBNUB.ws=function(b,c){if(!(this instanceof $c))return new $c(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
$c.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var ad=PUBNUB.ws=function(b,c){if(!(this instanceof ad))return new ad(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
v();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=u;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:q}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:u,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:u})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
ad.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
})();
